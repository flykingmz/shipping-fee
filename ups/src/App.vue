<template>
  <div class="container">
    <!-- é¡¶éƒ¨å¹¿å‘Šæ¨ªå¹… -->
    <div class="ad-banner top-banner">
      <div class="ad-placeholder">
        <h3>å¹¿å‘Šä½ (Google AdSense)</h3>
        <p>æ­¤åŒºåŸŸå¯æ”¾ç½®æ‚¨çš„å¹¿å‘Šä»£ç ï¼Œæœ€å¤§å®½åº¦æ”¯æŒ2400px</p>
      </div>
    </div>

    <!-- ä¸»æ ‡é¢˜åŒºåŸŸ -->
    <header class="main-header">
      <div class="header-content">
        <div class="logo-area">
          <h1 class="main-title">ğŸ“¦ USPS, UPS & DHLå›½é™…è¿è´¹ä¸å…³ç¨è®¡ç®—å™¨</h1>
          <p class="main-subtitle">æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œshipping feeå¯å¸®åŠ©æ‚¨é€‰æ‹©æœ€é€‚åˆæ‚¨çš„è¿è¾“æœåŠ¡åŠé¢„è®¡é€è¾¾æ—¶é—´</p>
        </div>
        <div class="header-info">
          <div class="info-card">
            <div class="info-icon">âš¡</div>
            <div class="info-text">
              <h4>å®æ—¶è´¹ç‡</h4>
              <p>å¯¹æ¥ USPS, UPS & DHLå®˜æ–¹API</p>
            </div>
          </div>
          <div class="info-card">
            <div class="info-icon">ğŸŒ</div>
            <div class="info-text">
              <h4>å…¨çƒè¦†ç›–</h4>
              <p>200+å›½å®¶åœ°åŒº</p>
            </div>
          </div>
          <div class="info-card">
            <div class="info-icon">ğŸ’°</div>
            <div class="info-text">
              <h4>å…³ç¨é¢„ä¼°</h4>
              <p>æ™ºèƒ½è®¡ç®—åˆ°å²¸æˆæœ¬</p>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸï¼šä¸‰åˆ—å¸ƒå±€ -->
    <main class="main-content">
      <!-- å·¦ä¾§ï¼šè¡¨å•è¾“å…¥åŒºåŸŸ -->
      <section class="input-section">
        <div class="section-header">
          <h2 class="section-title">1. å¡«å†™è´§è¿ä¿¡æ¯</h2>
          <p class="section-desc">è¾“å…¥åŒ…è£¹è¯¦æƒ…ä»¥è·å–å‡†ç¡®çš„è¿è´¹ä¼°ç®—</p>
        </div>
        
        <div class="form-container">
          <!-- å‘è´§åœ°ä¿¡æ¯ -->
          <div class="form-section-card">
            <h3 class="form-subtitle">å‘è´§åœ°ä¿¡æ¯</h3>
            <div class="form-grid">
              <div class="form-group large">
                <label for="fromCountry">å‘è´§å›½å®¶/åœ°åŒº</label>
                <select id="fromCountry" v-model="form.fromCountry" @change="updateFromStates">
                  <option value="US">ç¾å›½ United States</option>
                  <option value="CN">ä¸­å›½ China</option>
                  <option value="DE">å¾·å›½ Germany</option>
                  <option value="GB">è‹±å›½ United Kingdom</option>
                  <option value="JP">æ—¥æœ¬ Japan</option>
                  <option value="CA">åŠ æ‹¿å¤§ Canada</option>
                  <option value="AU">æ¾³å¤§åˆ©äºš Australia</option>
                </select>
              </div>
              
              <div class="form-group large">
                <label for="fromPostal">é‚®æ”¿ç¼–ç </label>
                <input 
                  id="fromPostal" 
                  v-model="form.fromPostal" 
                  placeholder="ä¾‹å¦‚: 10001 (çº½çº¦)"
                  required
                >
              </div>
            </div>
          </div>

          <!-- æ”¶è´§åœ°ä¿¡æ¯ -->
          <div class="form-section-card">
            <h3 class="form-subtitle">æ”¶è´§åœ°ä¿¡æ¯</h3>
            <div class="form-grid">
              <div class="form-group large">
                <label for="toCountry">æ”¶è´§å›½å®¶/åœ°åŒº</label>
                <select id="toCountry" v-model="form.toCountry">
                  <option value="US">ç¾å›½ United States</option>
                  <option value="CN">ä¸­å›½ China</option>
                  <option value="DE">å¾·å›½ Germany</option>
                  <option value="GB">è‹±å›½ United Kingdom</option>
                  <option value="JP">æ—¥æœ¬ Japan</option>
                  <option value="CA">åŠ æ‹¿å¤§ Canada</option>
                  <option value="AU">æ¾³å¤§åˆ©äºš Australia</option>
                  <option value="FR">æ³•å›½ France</option>
                  <option value="IT">æ„å¤§åˆ© Italy</option>
                  <option value="ES">è¥¿ç­ç‰™ Spain</option>
                </select>
              </div>
              
              <div class="form-group large">
                <label for="toPostal">é‚®æ”¿ç¼–ç </label>
                <input 
                  id="toPostal" 
                  v-model="form.toPostal" 
                  placeholder="ä¾‹å¦‚: 200001 (ä¸Šæµ·)"
                  required
                >
              </div>
            </div>
          </div>

          <!-- åŒ…è£¹è¯¦ç»†ä¿¡æ¯ -->
          <div class="form-section-card">
            <h3 class="form-subtitle">åŒ…è£¹è¯¦ç»†ä¿¡æ¯</h3>
            <div class="form-grid triple">
              <div class="form-group">
                <label for="weight">é‡é‡ (kg)</label>
                <input 
                  id="weight" 
                  v-model.number="form.weight" 
                  type="number" 
                  min="0.1" 
                  step="0.1"
                  placeholder="ä¾‹å¦‚: 2.5"
                  required
                >
                <p class="helper-text">æœ€å°: 0.1kg</p>
              </div>
              
              <div class="form-group">
                <label for="length">é•¿åº¦ (cm)</label>
                <input 
                  id="length" 
                  v-model.number="form.length" 
                  type="number" 
                  min="1"
                  placeholder="30"
                >
              </div>
              
              <div class="form-group">
                <label for="width">å®½åº¦ (cm)</label>
                <input 
                  id="width" 
                  v-model.number="form.width" 
                  type="number" 
                  min="1"
                  placeholder="20"
                >
              </div>
              
              <div class="form-group">
                <label for="height">é«˜åº¦ (cm)</label>
                <input 
                  id="height" 
                  v-model.number="form.height" 
                  type="number" 
                  min="1"
                  placeholder="15"
                >
              </div>
              
              <div class="form-group">
                <label for="value">è´§ç‰©ä»·å€¼ (USD)</label>
                <input 
                  id="value" 
                  v-model.number="form.value" 
                  type="number" 
                  min="0"
                  step="10"
                  placeholder="ä¾‹å¦‚: 100"
                >
                <p class="helper-text">ç”¨äºå…³ç¨è®¡ç®—</p>
              </div>
              
              <div class="form-group">
                <label for="packageType">åŒ…è£¹ç±»å‹</label>
                <select id="packageType" v-model="form.packageType">
                  <option value="02">æ ‡å‡†åŒ…è£¹</option>
                  <option value="01">UPSä¿¡å°</option>
                  <option value="03">UPSç®¡çŠ¶åŒ…è£¹</option>
                  <option value="04">UPSçº¸ç®±</option>
                </select>
              </div>
            </div>
          </div>

          <!-- æ“ä½œæŒ‰é’® -->
          <div class="action-buttons">
            <button 
              class="calculate-btn primary-btn" 
              @click="calculateShipping"
              :disabled="loading || !formValid"
            >
              <span class="btn-icon">ğŸš€</span>
              <span class="btn-text">{{ loading ? 'æ­£åœ¨è®¡ç®—ä¸­...' : 'ç«‹å³è®¡ç®—è¿è´¹ä¸å…³ç¨' }}</span>
            </button>
            
            <button class="secondary-btn" @click="resetForm">
              <span class="btn-icon">ğŸ”„</span>
              <span class="btn-text">é‡ç½®è¡¨å•</span>
            </button>
          </div>
        </div>
      </section>

      <!-- ä¸­é—´ï¼šç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
      <section class="results-section" v-if="results.length > 0">
        <div class="section-header">
          <h2 class="section-title">2. è¿è´¹ä¸å…³ç¨ä¼°ç®—ç»“æœ</h2>
          <p class="section-desc">åŸºäºæ‚¨è¾“å…¥çš„ä¿¡æ¯ï¼Œä»¥ä¸‹ä¸ºUPSå„æœåŠ¡çš„è¯¦ç»†æŠ¥ä»·</p>
        </div>
        
        <!-- æ‘˜è¦å¡ç‰‡ -->
        <div class="summary-container">
          <div class="summary-card highlight">
            <div class="summary-icon">ğŸ’°</div>
            <div class="summary-content">
              <h4>æœ€ç»æµé€‰æ‹©</h4>
              <p class="summary-price">{{ cheapestService?.total || 'N/A' }}</p>
              <p class="summary-service">{{ cheapestService?.service || '' }}</p>
              <p class="summary-desc">æ€§ä»·æ¯”æœ€é«˜çš„è¿è¾“æ–¹æ¡ˆ</p>
            </div>
          </div>
          
          <div class="summary-card highlight accent">
            <div class="summary-icon">âš¡</div>
            <div class="summary-content">
              <h4>æœ€å¿«é€Ÿé€‰æ‹©</h4>
              <p class="summary-price">{{ fastestService?.total || 'N/A' }}</p>
              <p class="summary-service">{{ fastestService?.service || '' }}</p>
              <p class="summary-desc">æ—¶æ•ˆä¼˜å…ˆçš„å¿«é€’æ–¹æ¡ˆ</p>
            </div>
          </div>
          
          <div class="summary-card">
            <div class="summary-icon">ğŸ“¦</div>
            <div class="summary-content">
              <h4>åŒ…è£¹æ¦‚è§ˆ</h4>
              <p class="summary-detail">é‡é‡: {{ form.weight }} kg</p>
              <p class="summary-detail">ç›®çš„åœ°: {{ getCountryName(form.toCountry) }}</p>
              <p class="summary-detail">ä»·å€¼: ${{ form.value }}</p>
            </div>
          </div>
        </div>

        <!-- è¯¦ç»†ç»“æœè¡¨æ ¼ -->
        <div class="results-table-container">
          <h3 class="table-title">UPSæœåŠ¡è¯¦æƒ…å¯¹æ¯”</h3>
          <div class="table-wrapper">
            <table class="results-table">
              <thead>
                <tr>
                  <th class="service-col">æœåŠ¡ç±»å‹</th>
                  <th class="price-col">è¿è´¹</th>
                  <th class="price-col">å…³ç¨/ç¨è´¹</th>
                  <th class="price-col total-col">æ€»è´¹ç”¨</th>
                  <th class="delivery-col">é¢„ä¼°æ—¶æ•ˆ</th>
                  <th class="action-col">æ“ä½œ</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="(result, index) in results" :key="index" :class="{ 'recommended': result.service.includes('Express') }">
                  <td class="service-cell">
                    <div class="service-name">{{ result.service }}</div>
                    <div class="service-desc">{{ result.description }}</div>
                  </td>
                  <td class="price-cell">
                    <div class="price-amount">{{ result.shipping }}</div>
                  </td>
                  <td class="price-cell">
                    <div class="price-amount">{{ result.tax }}</div>
                    <div class="tax-note">é¢„ä¼°å…³ç¨</div>
                  </td>
                  <td class="price-cell total-cell">
                    <div class="total-amount">{{ result.total }}</div>
                    <div class="total-note">åˆ°å²¸æ€»æˆæœ¬</div>
                  </td>
                  <td class="delivery-cell">
                    <div class="delivery-time">{{ result.delivery }}</div>
                    <div class="delivery-note">å·¥ä½œæ—¥</div>
                  </td>
                  <td class="action-cell">
                    <button class="details-btn" @click="showDetails(result)">
                      æŸ¥çœ‹è¯¦æƒ…
                    </button>
                    <button class="select-btn" @click="selectService(result)">
                      é€‰æ‹©æ­¤æœåŠ¡
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- ä¿¡æ¯æç¤º -->
        <div class="info-notice">
          <div class="notice-header">
            <span class="notice-icon">â„¹ï¸</span>
            <h4>é‡è¦æç¤ºä¸å…è´£å£°æ˜</h4>
          </div>
          <ul class="notice-list">
            <li>ä»¥ä¸Šè´¹ç”¨ä¸ºåŸºäºå½“å‰å¸‚åœºæ¡ä»¶çš„é¢„ä¼°é‡‘é¢ï¼Œæœ€ç»ˆè´¹ç”¨å¯èƒ½å› ç‡ƒæ²¹é™„åŠ è´¹ã€æ±‡ç‡æ³¢åŠ¨ç­‰å› ç´ è€Œæœ‰æ‰€ä¸åŒã€‚</li>
            <li>å…³ç¨å’Œç¨è´¹ä¼šæ ¹æ®ç›®çš„åœ°å›½å®¶çš„æ³•è§„ã€å•†å“åˆ†ç±»å’Œä»·å€¼è€Œå˜åŒ–ï¼Œæœ€ç»ˆé‡‘é¢ä»¥æµ·å…³æ ¸å®šä¸ºå‡†ã€‚</li>
            <li>é…é€æ—¶æ•ˆä¸ºå·¥ä½œæ—¥ä¼°ç®—ï¼Œä¸åŒ…æ‹¬æ¸…å…³å»¶è¯¯ã€å¤©æ°”å› ç´ æˆ–èŠ‚å‡æ—¥å½±å“ã€‚</li>
            <li>å®é™…è¿è´¹ä»¥UPSæœ€ç»ˆè´¦å•ä¸ºå‡†ï¼Œå»ºè®®åœ¨å‘è´§å‰ä¸UPSå®˜æ–¹ç¡®è®¤æœ€æ–°è´¹ç‡ã€‚</li>
            <li>æœ¬å·¥å…·æä¾›çš„è®¡ç®—ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆä»»ä½•è¿è¾“åˆåŒæˆ–æ‰¿è¯ºã€‚</li>
          </ul>
        </div>
      </section>

      <!-- å³ä¾§ï¼šä¿¡æ¯ä¸SEOå†…å®¹åŒºåŸŸ -->
      <aside class="info-section" v-if="results.length === 0">
        <div class="info-content">
          <div class="info-card">
            <h3 class="info-title">ğŸ“Š å¦‚ä½•ä½¿ç”¨æœ¬è®¡ç®—å™¨</h3>
            <ol class="info-list">
              <li>åœ¨å·¦ä¾§å¡«å†™å®Œæ•´çš„å‘è´§åœ°ä¸æ”¶è´§åœ°ä¿¡æ¯</li>
              <li>å‡†ç¡®è¾“å…¥åŒ…è£¹çš„å°ºå¯¸ã€é‡é‡å’Œç”³æŠ¥ä»·å€¼</li>
              <li>ç‚¹å‡»"ç«‹å³è®¡ç®—"æŒ‰é’®è·å–å®æ—¶æŠ¥ä»·</li>
              <li>æ¯”è¾ƒä¸åŒUPSæœåŠ¡çš„ä»·æ ¼ä¸æ—¶æ•ˆ</li>
              <li>é€‰æ‹©åˆé€‚çš„è¿è¾“æ–¹æ¡ˆè¿›è¡Œåç»­æ“ä½œ</li>
            </ol>
          </div>
          
          <div class="info-card">
            <h3 class="info-title">ğŸš€ UPSæœåŠ¡ç±»å‹è¯´æ˜</h3>
            <ul class="info-list">
              <li><strong>UPS Worldwide Express</strong>ï¼šæœ€å¿«çš„å›½é™…å¿«é€’æœåŠ¡ï¼Œ1-3ä¸ªå·¥ä½œæ—¥é€è¾¾ï¼Œé€‚ç”¨äºç´§æ€¥æ–‡ä»¶å’Œé«˜ä»·å€¼è´§ç‰©ã€‚</li>
              <li><strong>UPS Worldwide Saver</strong>ï¼šç»æµå‹å›½é™…å¿«é€’æœåŠ¡ï¼Œ2-5ä¸ªå·¥ä½œæ—¥é€è¾¾ï¼Œå¹³è¡¡äº†é€Ÿåº¦ä¸æˆæœ¬ã€‚</li>
              <li><strong>UPS Standard</strong>ï¼šæœ€ç»æµçš„å›½é™…é™†è¿æœåŠ¡ï¼Œ5-10ä¸ªå·¥ä½œæ—¥é€è¾¾ï¼Œé€‚ç”¨äºä¸ç´§æ€¥çš„å¤§ä»¶è´§ç‰©ã€‚</li>
              <li><strong>UPS Expedited</strong>ï¼šåŠ æ€¥æœåŠ¡ï¼Œæä¾›æ¯”æ ‡å‡†æœåŠ¡æ›´å¿«çš„é…é€é€‰é¡¹ã€‚</li>
            </ul>
          </div>
          
          <div class="info-card">
            <h3 class="info-title">ğŸ’¡ èŠ‚çœè¿è´¹å°è´´å£«</h3>
            <ul class="info-list">
              <li>å‡†ç¡®æµ‹é‡åŒ…è£¹å°ºå¯¸å’Œé‡é‡ï¼Œé¿å…å› å°ºå¯¸é‡é‡è¯¯å·®äº§ç”Ÿé¢å¤–è´¹ç”¨ã€‚</li>
              <li>åˆç†ç”³æŠ¥è´§ç‰©ä»·å€¼ï¼Œæ—¢èƒ½ç¡®ä¿ä¿é™©è¦†ç›–ï¼Œåˆèƒ½ä¼˜åŒ–å…³ç¨æˆæœ¬ã€‚</li>
              <li>æ¯”è¾ƒä¸åŒæœåŠ¡çš„æ€§ä»·æ¯”ï¼Œéç´§æ€¥è´§ç‰©å¯é€‰æ‹©æ ‡å‡†æœåŠ¡èŠ‚çœè´¹ç”¨ã€‚</li>
              <li>å…³æ³¨UPSçš„ä¿ƒé”€æ´»åŠ¨å’Œå­£èŠ‚æ€§æŠ˜æ‰£ï¼Œå¯èƒ½è·å¾—é¢å¤–ä¼˜æƒ ã€‚</li>
              <li>è€ƒè™‘ä½¿ç”¨UPSçš„æ‰¹é‡æŠ˜æ‰£è®¡åˆ’ï¼Œå¦‚æœç»å¸¸æœ‰å‘è´§éœ€æ±‚ã€‚</li>
            </ul>
          </div>
          
          <div class="info-card">
            <h3 class="info-title">ğŸŒ å…³ç¨è®¡ç®—åŸç†</h3>
            <p class="info-text">æœ¬å·¥å…·æ ¹æ®ä»¥ä¸‹å› ç´ ä¼°ç®—å…³ç¨ï¼š</p>
            <ul class="info-list">
              <li><strong>è´§ç‰©ç”³æŠ¥ä»·å€¼</strong>ï¼šå•†å“æœ¬èº«çš„ä»·å€¼ï¼Œå…³ç¨è®¡ç®—çš„åŸºç¡€ã€‚</li>
              <li><strong>ç›®çš„åœ°å›½å®¶ç¨ç‡</strong>ï¼šä¸åŒå›½å®¶ã€ä¸åŒå•†å“ç±»åˆ«çš„è¿›å£ç¨ç‡ä¸åŒã€‚</li>
              <li><strong>é™„åŠ è´¹ç”¨</strong>ï¼šå¯èƒ½åŒ…æ‹¬å¢å€¼ç¨ã€æ¶ˆè´¹ç¨ã€æµ·å…³å¤„ç†è´¹ç­‰ã€‚</li>
              <li><strong>è´¸æ˜“åå®š</strong>ï¼šæŸäº›å›½å®¶é—´çš„è´¸æ˜“åå®šå¯èƒ½æä¾›å…³ç¨ä¼˜æƒ ã€‚</li>
            </ul>
            <p class="info-note">æ³¨æ„ï¼šå…³ç¨ä¼°ç®—ä»…ä¾›å‚è€ƒï¼Œå®é™…é‡‘é¢ä»¥ç›®çš„åœ°æµ·å…³æ ¸å®šä¸ºå‡†ã€‚</p>
          </div>
        </div>
      </aside>
    </main>

    <!-- åº•éƒ¨å¹¿å‘Šæ¨ªå¹… -->
    <div class="ad-banner bottom-banner">
      <div class="ad-placeholder">
        <h3>åˆä½œä¼™ä¼´å¹¿å‘Šä½</h3>
        <p>æ­¤åŒºåŸŸå¯æ”¾ç½®ç›¸å…³ç‰©æµã€ç”µå•†æˆ–æ”¯ä»˜æœåŠ¡çš„å¹¿å‘Š</p>
      </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="main-footer">
      <div class="footer-content">
        <div class="footer-section">
          <h4 class="footer-title">UPSè¿è´¹è®¡ç®—å™¨</h4>
          <p class="footer-text">æä¾›UPSå›½é™…å¿«é€’è¿è´¹ä¸å…³ç¨çš„å®æ—¶ä¼°ç®—æœåŠ¡ï¼Œå¸®åŠ©æ‚¨åšå‡ºæ˜æ™ºçš„ç‰©æµå†³ç­–ã€‚</p>
        </div>
        
        <div class="footer-section">
          <h4 class="footer-title">å¿«é€Ÿé“¾æ¥</h4>
          <ul class="footer-links">
            <li><a href="/privacy">éšç§æ”¿ç­–</a></li>
            <li><a href="/terms">æœåŠ¡æ¡æ¬¾</a></li>
            <li><a href="/contact">è”ç³»æˆ‘ä»¬</a></li>
            <li><a href="/sitemap">ç½‘ç«™åœ°å›¾</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h4 class="footer-title">ç›¸å…³èµ„æº</h4>
          <ul class="footer-links">
            <li><a href="https://www.ups.com" target="_blank">UPSå®˜æ–¹ç½‘ç«™</a></li>
            <li><a href="https://www.ups.com/ratetool" target="_blank">UPSå®˜æ–¹è´¹ç‡å·¥å…·</a></li>
            <li><a href="/blog">ç‰©æµçŸ¥è¯†åšå®¢</a></li>
            <li><a href="/tools">å…¶ä»–ç‰©æµå·¥å…·</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h4 class="footer-title">æ”¯æŒä¸åé¦ˆ</h4>
          <p class="footer-text">å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š</p>
          <p class="footer-contact">Email: support@ups-calculator.com</p>
          <div class="footer-social">
            <span class="social-icon">ğŸ“§</span>
            <span class="social-icon">ğŸ¦</span>
            <span class="social-icon">ğŸ’¬</span>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p class="copyright">Â© 2023 UPSå›½é™…è¿è´¹è®¡ç®—å™¨ | æœ¬å·¥å…·ä¸ºç‹¬ç«‹ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œä¸UPSå…¬å¸æ— ç›´æ¥å…³è” | æ•°æ®ä»…ä¾›å‚è€ƒï¼Œå®é™…è´¹ç”¨ä»¥UPSå®˜æ–¹è´¦å•ä¸ºå‡†</p>
      </div>
    </footer>
  </div>
</template>

<script setup>
import { ref, computed, reactive } from 'vue'

// è¡¨å•æ•°æ®
const form = reactive({
  fromCountry: 'US',
  fromPostal: '10001',
  toCountry: 'CN',
  toPostal: '200001',
  weight: 2.5,
  length: 30,
  width: 20,
  height: 15,
  value: 100,
  packageType: '02'
})

// çŠ¶æ€ç®¡ç†
const loading = ref(false)
const error = ref('')
const results = ref([])

// è®¡ç®—å±æ€§
const formValid = computed(() => {
  return form.fromPostal && form.toPostal && form.weight > 0
})

const cheapestService = computed(() => {
  if (results.value.length === 0) return null
  return results.value.reduce((min, curr) => {
    const minVal = parseFloat(min.total.replace('$', ''))
    const currVal = parseFloat(curr.total.replace('$', ''))
    return currVal < minVal ? curr : min
  })
})

const fastestService = computed(() => {
  if (results.value.length === 0) return null
  return results.value.find(r => r.service.includes('Express')) || results.value[0]
})

// æ–¹æ³•
const calculateShipping = async () => {
  if (!formValid.value) return
  
  loading.value = true
  error.value = ''
  results.value = []
  
  try {
    // æ¨¡æ‹ŸAPIè°ƒç”¨å»¶è¿Ÿ
    await new Promise(resolve => setTimeout(resolve, 1500))
    
    // å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
    results.value = getMockData()
  } catch (err) {
    console.error('è®¡ç®—é”™è¯¯:', err)
    error.value = 'è®¡ç®—è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•'
  } finally {
    loading.value = false
  }
}

const resetForm = () => {
  form.fromCountry = 'US'
  form.fromPostal = '10001'
  form.toCountry = 'CN'
  form.toPostal = '200001'
  form.weight = 2.5
  form.length = 30
  form.width = 20
  form.height = 15
  form.value = 100
  form.packageType = '02'
  results.value = []
  error.value = ''
}

const showDetails = (service) => {
  alert(`æœåŠ¡è¯¦æƒ…:\n\næœåŠ¡: ${service.service}\næè¿°: ${service.description}\nè¿è´¹: ${service.shipping}\nå…³ç¨: ${service.tax}\næ€»è´¹ç”¨: ${service.total}\næ—¶æ•ˆ: ${service.delivery}`)
}

const selectService = (service) => {
  alert(`å·²é€‰æ‹©: ${service.service}\næ€»è´¹ç”¨: ${service.total}\næ‚¨å°†è¢«å¼•å¯¼è‡³UPSå®˜æ–¹ç½‘ç«™å®Œæˆåç»­æ“ä½œã€‚`)
}

const getCountryName = (code) => {
  const countries = {
    'US': 'ç¾å›½',
    'CN': 'ä¸­å›½',
    'DE': 'å¾·å›½',
    'GB': 'è‹±å›½',
    'JP': 'æ—¥æœ¬',
    'CA': 'åŠ æ‹¿å¤§',
    'AU': 'æ¾³å¤§åˆ©äºš',
    'FR': 'æ³•å›½',
    'IT': 'æ„å¤§åˆ©',
    'ES': 'è¥¿ç­ç‰™'
  }
  return countries[code] || code
}

// å¼€å‘ç¯å¢ƒæ¨¡æ‹Ÿæ•°æ®
const getMockData = () => {
  return [
    {
      service: 'UPS Worldwide Express',
      description: 'æœ€å¿«çš„å›½é™…å¿«é€’æœåŠ¡ï¼Œä¼˜å…ˆå¤„ç†ï¼Œå…¨ç¨‹è·Ÿè¸ª',
      shipping: '$68.50',
      tax: '$15.20',
      total: '$83.70',
      delivery: '1-3ä¸ªå·¥ä½œæ—¥',
      details: {
        baseCharge: 65.00,
        fuelSurcharge: 3.50,
        taxRate: '18%'
      }
    },
    {
      service: 'UPS Worldwide Saver',
      description: 'ç»æµå‹å›½é™…å¿«é€’æœåŠ¡ï¼Œæ€§ä»·æ¯”é«˜',
      shipping: '$45.30',
      tax: '$12.50',
      total: '$57.80',
      delivery: '2-5ä¸ªå·¥ä½œæ—¥',
      details: {
        baseCharge: 42.00,
        fuelSurcharge: 3.30,
        taxRate: '18%'
      }
    },
    {
      service: 'UPS Expedited',
      description: 'åŠ æ€¥å›½é™…æœåŠ¡ï¼Œæ¯”æ ‡å‡†æœåŠ¡æ›´å¿«',
      shipping: '$52.10',
      tax: '$13.80',
      total: '$65.90',
      delivery: '3-6ä¸ªå·¥ä½œæ—¥',
      details: {
        baseCharge: 48.00,
        fuelSurcharge: 4.10,
        taxRate: '18%'
      }
    },
    {
      service: 'UPS Standard',
      description: 'æœ€ç»æµçš„å›½é™…é™†è¿æœåŠ¡',
      shipping: '$28.90',
      tax: '$8.70',
      total: '$37.60',
      delivery: '5-10ä¸ªå·¥ä½œæ—¥',
      details: {
        baseCharge: 26.00,
        fuelSurcharge: 2.90,
        taxRate: '18%'
      }
    }
  ]
}

const updateFromStates = () => {
  // å¯æ ¹æ®é€‰æ‹©çš„å‘è´§å›½å®¶æ›´æ–°å·/çœé€‰é¡¹
  console.log('å‘è´§å›½å®¶å˜æ›´ä¸º:', form.fromCountry)
}
</script>

<style scoped>
/* åŸºç¡€æ ·å¼é‡ç½® */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  line-height: 1.6;
  color: #1a1a1a;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  min-height: 100vh;
}

/* ä¸»å®¹å™¨ - å®½åº¦æ‰©å±•è‡³2å€ */
.container {
  max-width: 2400px;
  margin: 0 auto;
  padding: 30px 40px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* å¹¿å‘Šæ¨ªå¹…æ ·å¼ */
.ad-banner {
  margin: 25px 0;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
}

.top-banner {
  margin-top: 0;
  margin-bottom: 40px;
}

.bottom-banner {
  margin-top: 50px;
  margin-bottom: 0;
}

.ad-placeholder {
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  color: white;
  padding: 40px;
  text-align: center;
  border-radius: 16px;
}

.ad-placeholder h3 {
  font-size: 28px;
  margin-bottom: 15px;
  font-weight: 700;
}

.ad-placeholder p {
  font-size: 18px;
  opacity: 0.9;
}

/* ä¸»æ ‡é¢˜åŒºåŸŸ */
.main-header {
  background: white;
  border-radius: 20px;
  padding: 50px;
  margin-bottom: 50px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.06);
  border: 1px solid #e2e8f0;
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 40px;
}

.logo-area {
  flex: 1;
  min-width: 600px;
}

.main-title {
  font-size: 44px;
  color: #1e293b;
  margin-bottom: 20px;
  font-weight: 800;
  line-height: 1.2;
}

.main-subtitle {
  font-size: 22px;
  color: #64748b;
  max-width: 900px;
  line-height: 1.5;
}

.header-info {
  display: flex;
  gap: 30px;
  flex-wrap: wrap;
}

.info-card {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 25px;
  background: #f8fafc;
  border-radius: 16px;
  min-width: 220px;
  border: 1px solid #e2e8f0;
}

.info-icon {
  font-size: 36px;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.info-text h4 {
  font-size: 20px;
  color: #1e293b;
  margin-bottom: 5px;
  font-weight: 700;
}

.info-text p {
  font-size: 16px;
  color: #64748b;
}

/* ä¸»è¦å†…å®¹åŒºåŸŸ - ä¸‰åˆ—å¸ƒå±€ */
.main-content {
  display: grid;
  grid-template-columns: 1fr 1.2fr 0.8fr;
  gap: 40px;
  margin-bottom: 60px;
  flex: 1;
}

/* å„åŒºåŸŸå…¬å…±æ ·å¼ */
.input-section,
.results-section,
.info-section {
  background: white;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.06);
  border: 1px solid #e2e8f0;
}

.section-header {
  margin-bottom: 40px;
}

.section-title {
  font-size: 32px;
  color: #1e293b;
  margin-bottom: 15px;
  font-weight: 700;
}

.section-desc {
  font-size: 18px;
  color: #64748b;
}

/* è¡¨å•åŒºåŸŸæ ·å¼ */
.form-container {
  display: flex;
  flex-direction: column;
  gap: 35px;
}

.form-section-card {
  background: #f8fafc;
  border-radius: 16px;
  padding: 35px;
  border: 1px solid #e2e8f0;
}

.form-subtitle {
  font-size: 24px;
  color: #1e293b;
  margin-bottom: 25px;
  font-weight: 600;
  padding-bottom: 15px;
  border-bottom: 2px solid #e2e8f0;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 25px;
}

.form-grid.triple {
  grid-template-columns: repeat(3, 1fr);
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group.large {
  grid-column: span 1;
}

.form-group label {
  font-size: 18px;
  color: #475569;
  margin-bottom: 12px;
  font-weight: 600;
}

.form-group input,
.form-group select {
  padding: 18px 20px;
  font-size: 18px;
  border: 2px solid #cbd5e1;
  border-radius: 12px;
  background: white;
  transition: all 0.3s ease;
  color: #1e293b;
}

.form-group input:focus,
.form-group select:focus {
  outline: none;
  border-color: #4f46e5;
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.form-group input::placeholder {
  color: #94a3b8;
}

.helper-text {
  font-size: 14px;
  color: #64748b;
  margin-top: 8px;
}

/* æŒ‰é’®æ ·å¼ */
.action-buttons {
  display: flex;
  gap: 25px;
  margin-top: 20px;
}

.calculate-btn,
.primary-btn,
.secondary-btn {
  padding: 22px 40px;
  font-size: 20px;
  border: none;
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  font-weight: 600;
}

.primary-btn {
  flex: 2;
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  color: white;
}

.primary-btn:hover:not(:disabled) {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(79, 70, 229, 0.3);
}

.secondary-btn {
  flex: 1;
  background: #f1f5f9;
  color: #475569;
  border: 2px solid #cbd5e1;
}

.secondary-btn:hover {
  background: #e2e8f0;
}

.primary-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.btn-icon {
  font-size: 24px;
}

.btn-text {
  font-size: 20px;
}

/* ç»“æœåŒºåŸŸæ ·å¼ */
.results-section {
  grid-column: span 1;
}

.summary-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 30px;
  margin-bottom: 50px;
}

.summary-card {
  background: white;
  border-radius: 16px;
  padding: 35px;
  border: 2px solid #e2e8f0;
  display: flex;
  align-items: center;
  gap: 25px;
  transition: transform 0.3s ease;
}

.summary-card:hover {
  transform: translateY(-5px);
}

.summary-card.highlight {
  background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
  color: white;
  border: none;
}

.summary-card.highlight.accent {
  background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
}

.summary-icon {
  font-size: 48px;
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 16px;
}

.summary-content h4 {
  font-size: 22px;
  margin-bottom: 10px;
  font-weight: 700;
}

.summary-price {
  font-size: 36px;
  font-weight: 800;
  margin-bottom: 8px;
}

.summary-service {
  font-size: 18px;
  opacity: 0.9;
  margin-bottom: 5px;
}

.summary-desc,
.summary-detail {
  font-size: 16px;
  opacity: 0.8;
}

.summary-detail {
  margin-bottom: 5px;
}

/* ç»“æœè¡¨æ ¼æ ·å¼ */
.results-table-container {
  margin-bottom: 50px;
}

.table-title {
  font-size: 26px;
  color: #1e293b;
  margin-bottom: 25px;
  font-weight: 700;
}

.table-wrapper {
  overflow-x: auto;
  border-radius: 16px;
  border: 1px solid #e2e8f0;
}

.results-table {
  width: 100%;
  border-collapse: collapse;
  min-width: 1000px;
}

.results-table thead {
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  color: white;
}

.results-table th {
  padding: 25px 20px;
  font-size: 20px;
  font-weight: 600;
  text-align: left;
  border-bottom: 2px solid #e2e8f0;
}

.results-table td {
  padding: 25px 20px;
  border-bottom: 1px solid #e2e8f0;
}

.results-table tbody tr {
  transition: background-color 0.2s ease;
}

.results-table tbody tr:hover {
  background-color: #f8fafc;
}

.results-table tbody tr.recommended {
  background-color: #f0f9ff;
  border-left: 4px solid #3b82f6;
}

.service-cell {
  min-width: 300px;
}

.service-name {
  font-size: 20px;
  color: #1e293b;
  font-weight: 600;
  margin-bottom: 8px;
}

.service-desc {
  font-size: 16px;
  color: #64748b;
}

.price-cell {
  min-width: 150px;
}

.price-amount {
  font-size: 22px;
  color: #1e293b;
  font-weight: 600;
}

.tax-note {
  font-size: 14px;
  color: #64748b;
  margin-top: 5px;
}

.total-cell .price-amount {
  font-size: 26px;
  color: #10b981;
}

.total-note {
  font-size: 14px;
  color: #10b981;
  margin-top: 5px;
}

.delivery-cell {
  min-width: 150px;
}

.delivery-time {
  font-size: 20px;
  color: #1e293b;
  font-weight: 600;
}

.delivery-note {
  font-size: 14px;
  color: #64748b;
  margin-top: 5px;
}

.action-cell {
  min-width: 200px;
}

.details-btn,
.select-btn {
  padding: 14px 24px;
  font-size: 16px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-weight: 600;
  margin-bottom: 10px;
  display: block;
  width: 100%;
}

.details-btn {
  background: #f1f5f9;
  color: #475569;
}

.details-btn:hover {
  background: #e2e8f0;
}

.select-btn {
  background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
  color: white;
}

.select-btn:hover {
  background: linear-gradient(135deg, #0da271 0%, #2bb884 100%);
  transform: translateY(-2px);
}

/* ä¿¡æ¯æç¤ºåŒºåŸŸ */
.info-notice {
  background: #fff7ed;
  border: 2px solid #fed7aa;
  border-radius: 16px;
  padding: 35px;
  margin-top: 40px;
}

.notice-header {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 25px;
}

.notice-icon {
  font-size: 32px;
}

.notice-header h4 {
  font-size: 24px;
  color: #9a3412;
  font-weight: 700;
}

.notice-list {
  list-style-type: none;
}

.notice-list li {
  font-size: 18px;
  color: #7c2d12;
  margin-bottom: 15px;
  padding-left: 10px;
  position: relative;
  line-height: 1.5;
}

.notice-list li:before {
  content: "â€¢";
  color: #f97316;
  font-size: 24px;
  position: absolute;
  left: -15px;
  top: -2px;
}

/* å³ä¾§ä¿¡æ¯åŒºåŸŸæ ·å¼ */
.info-section {
  height: fit-content;
  position: sticky;
  top: 40px;
}

.info-content {
  display: flex;
  flex-direction: column;
  gap: 35px;
}

.info-card {
  background: #f8fafc;
  border-radius: 16px;
  padding: 30px;
  border: 1px solid #e2e8f0;
}

.info-title {
  font-size: 24px;
  color: #1e293b;
  margin-bottom: 20px;
  font-weight: 700;
  padding-bottom: 15px;
  border-bottom: 2px solid #e2e8f0;
}

.info-list {
  list-style-type: none;
}

.info-list li {
  font-size: 17px;
  color: #475569;
  margin-bottom: 15px;
  padding-left: 10px;
  position: relative;
  line-height: 1.5;
}

.info-list li:before {
  content: "â€º";
  color: #4f46e5;
  font-size: 20px;
  position: absolute;
  left: -15px;
}

.info-text {
  font-size: 17px;
  color: #475569;
  margin-bottom: 15px;
  line-height: 1.5;
}

.info-note {
  font-size: 15px;
  color: #64748b;
  font-style: italic;
  margin-top: 15px;
  padding: 15px;
  background: white;
  border-radius: 10px;
  border-left: 4px solid #94a3b8;
}

/* é¡µè„šæ ·å¼ */
.main-footer {
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  color: white;
  border-radius: 20px;
  padding: 60px 50px 30px;
  margin-top: 60px;
}

.footer-content {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 50px;
  margin-bottom: 50px;
}

.footer-section {
  display: flex;
  flex-direction: column;
}

.footer-title {
  font-size: 22px;
  color: #f1f5f9;
  margin-bottom: 25px;
  font-weight: 700;
  position: relative;
  padding-bottom: 15px;
}

.footer-title:after {
  content: '';
  position: absolute;
  left: 0;
  bottom: 0;
  width: 50px;
  height: 3px;
  background: #4f46e5;
  border-radius: 2px;
}

.footer-text {
  font-size: 17px;
  color: #cbd5e1;
  line-height: 1.6;
  margin-bottom: 20px;
}

.footer-links {
  list-style-type: none;
}

.footer-links li {
  margin-bottom: 15px;
}

.footer-links a {
  font-size: 17px;
  color: #cbd5e1;
  text-decoration: none;
  transition: color 0.2s ease;
}

.footer-links a:hover {
  color: #4f46e5;
}

.footer-contact {
  font-size: 17px;
  color: #cbd5e1;
  margin-bottom: 20px;
}

.footer-social {
  display: flex;
  gap: 20px;
}

.social-icon {
  font-size: 28px;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.social-icon:hover {
  transform: translateY(-3px);
}

.footer-bottom {
  border-top: 1px solid #334155;
  padding-top: 30px;
  text-align: center;
}

.copyright {
  font-size: 16px;
  color: #94a3b8;
  line-height: 1.5;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 2000px) {
  .container {
    max-width: 1800px;
    padding: 30px;
  }
  
  .main-content {
    grid-template-columns: 1fr 1fr;
  }
  
  .info-section {
    grid-column: span 2;
    margin-top: 40px;
    position: static;
  }
}

@media (max-width: 1200px) {
  .container {
    max-width: 100%;
    padding: 20px;
  }
  
  .main-content {
    grid-template-columns: 1fr;
    gap: 30px;
  }
  
  .info-section {
    grid-column: span 1;
    margin-top: 0;
  }
  
  .footer-content {
    grid-template-columns: repeat(2, 1fr);
    gap: 40px;
  }
  
  .summary-container {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .main-header {
    padding: 30px;
  }
  
  .header-content {
    flex-direction: column;
    text-align: center;
  }
  
  .logo-area {
    min-width: 100%;
  }
  
  .header-info {
    justify-content: center;
  }
  
  .info-card {
    min-width: 200px;
  }
  
  .form-grid {
    grid-template-columns: 1fr;
  }
  
  .form-grid.triple {
    grid-template-columns: 1fr;
  }
  
  .summary-container {
    grid-template-columns: 1fr;
  }
  
  .action-buttons {
    flex-direction: column;
  }
  
  .footer-content {
    grid-template-columns: 1fr;
    gap: 30px;
  }
}

/* åŠ¨ç”»æ•ˆæœ */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.results-section {
  animation: fadeIn 0.5s ease-out;
}

/* æ‰“å°æ ·å¼ */
@media print {
  .ad-banner,
  .action-buttons,
  .details-btn,
  .select-btn {
    display: none !important;
  }
  
  .container {
    max-width: 100%;
    padding: 0;
  }
  
  .main-content {
    display: block;
  }
  
  .input-section,
  .results-section,
  .info-section {
    box-shadow: none;
    border: 1px solid #ddd;
    margin-bottom: 20px;
    page-break-inside: avoid;
  }
}
</style>