<template>
  <div class="container">
    <!-- é¡¶éƒ¨å¹¿å‘Šæ¨ªå¹… -->
    <div class="ad-banner top-banner">
      <div class="ad-placeholder">
        <h3>å›½é™…ç‰©æµè¿è´¹è®¡ç®—å™¨</h3>
        <p>å®æ—¶æ¯”è¾ƒUPSã€DHLã€FedExã€EMSå››å¤§å¿«é€’æœåŠ¡</p>
      </div>
    </div>
   <!-- JSON-LD ç»“æ„åŒ–æ•°æ® -->
    <script type="application/ld+json" v-html="structuredData"></script>
    
    <!-- æˆ–è€…ä½¿ç”¨æ›´ç®€æ´çš„æ–¹å¼ -->
    <script type="application/ld+json">
      {
        "@context": "https://shipping-fee-mu.vercel.app/",
        "@type": "WebApplication",
        "name": "å›½é™…è¿è´¹è®¡ç®—å™¨",
        "description": "å…è´¹åœ¨çº¿è®¡ç®—UPSã€DHLã€FedExã€EMSå›½é™…å¿«é€’è¿è´¹ä¸æ—¶æ•ˆ",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Any",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        }
      }
    </script>

    <!-- ä¸»æ ‡é¢˜åŒºåŸŸ -->
    <header class="main-header">
      <div class="header-content">
        <div class="logo-area">
          <h1 class="main-title">ğŸŒ å›½é™…è¿è´¹ä¸æ—¶æ•ˆç»¼åˆè®¡ç®—å™¨</h1>
          <p class="main-subtitle">ä¸€ç«™å¼æ¯”è¾ƒUPSã€DHLã€FedExã€EMSå››å¤§å›½é™…å¿«é€’çš„è´¹ç”¨ä¸æ—¶æ•ˆï¼ŒåŒ…å«æ‰€æœ‰é™„åŠ è´¹</p>
        </div>
        <div class="header-info">
          <div class="info-card">
            <div class="info-icon">âš¡</div>
            <div class="info-text">
              <h4>å®æ—¶è´¹ç‡</h4>
              <p>åŸºäºæœ€æ–°è¿è´¹è¡¨</p>
            </div>
          </div>
          <div class="info-card">
            <div class="info-icon">ğŸ“Š</div>
            <div class="info-text">
              <h4>å®Œæ•´è´¹ç”¨</h4>
              <p>åŒ…å«æ‰€æœ‰é™„åŠ è´¹</p>
            </div>
          </div>
          <div class="info-card">
            <div class="info-icon">â±ï¸</div>
            <div class="info-text">
              <h4>æ—¶æ•ˆé¢„ä¼°</h4>
              <p>ç²¾ç¡®åˆ°å·¥ä½œæ—¥</p>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸï¼šä¸‰åˆ—å¸ƒå±€ -->
    <main class="main-content">
      <!-- å·¦ä¾§ï¼šè¡¨å•è¾“å…¥åŒºåŸŸ -->
      <section class="input-section">
        <div class="section-header">
          <h2 class="section-title">1. å¡«å†™è´§è¿è¯¦ç»†ä¿¡æ¯</h2>
          <p class="section-desc">è¾“å…¥åŒ…è£¹è¯¦æƒ…ä»¥è·å–å››å¤§å¿«é€’çš„ç²¾ç¡®æŠ¥ä»·</p>
        </div>
        
        <div class="form-container">
          <!-- å‘è´§åœ°ä¸ç›®çš„åœ° -->
          <div class="form-section-card">
            <h3 class="form-subtitle">ğŸ“ åœ°ç‚¹ä¿¡æ¯</h3>
            <div class="form-grid">
              <div class="form-group">
                <label for="fromCountry">å‘è´§å›½å®¶</label>
                <select id="fromCountry" v-model="form.fromCountry">
                  <option v-for="country in countries" :value="country.code" :key="country.code">
                    {{ country.name }} ({{ country.code }})
                  </option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="fromCity">å‘è´§åŸå¸‚</label>
                <input id="fromCity" v-model="form.fromCity" placeholder="ä¾‹å¦‚: ä¸Šæµ·" required>
              </div>
              
              <div class="form-group">
                <label for="toCountry">ç›®çš„å›½å®¶</label>
                <select id="toCountry" v-model="form.toCountry">
                  <option v-for="country in countries" :value="country.code" :key="country.code">
                    {{ country.name }} ({{ country.code }})
                  </option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="toCity">ç›®çš„åŸå¸‚</label>
                <input id="toCity" v-model="form.toCity" placeholder="ä¾‹å¦‚: çº½çº¦" required>
              </div>
              
              <div class="form-group">
                <label for="isRemoteArea">åè¿œåœ°åŒºï¼Ÿ</label>
                <select id="isRemoteArea" v-model="form.isRemoteArea">
                  <option value="false">å¦</option>
                  <option value="true">æ˜¯ï¼ˆ+åè¿œé™„åŠ è´¹ï¼‰</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="isResidential">ä½å®…é…é€ï¼Ÿ</label>
                <select id="isResidential" v-model="form.isResidential">
                  <option value="false">å¦ï¼ˆå•†ä¸šåœ°å€ï¼‰</option>
                  <option value="true">æ˜¯ï¼ˆ+ä½å®…é…é€è´¹ï¼‰</option>
                </select>
              </div>
            </div>
          </div>

          <!-- åŒ…è£¹è¯¦ç»†ä¿¡æ¯ -->
          <div class="form-section-card">
            <h3 class="form-subtitle">ğŸ“¦ åŒ…è£¹ä¿¡æ¯</h3>
            <div class="form-grid triple">
              <div class="form-group">
                <label for="weight">å®é™…é‡é‡ (kg)</label>
                <input id="weight" v-model.number="form.weight" type="number" min="0.1" step="0.1" required>
                <p class="helper-text">æœ€å°: 0.1kg</p>
              </div>
              
              <div class="form-group">
                <label for="length">é•¿åº¦ (cm)</label>
                <input id="length" v-model.number="form.length" type="number" min="1" required>
              </div>
              
              <div class="form-group">
                <label for="width">å®½åº¦ (cm)</label>
                <input id="width" v-model.number="form.width" type="number" min="1" required>
              </div>
              
              <div class="form-group">
                <label for="height">é«˜åº¦ (cm)</label>
                <input id="height" v-model.number="form.height" type="number" min="1" required>
              </div>
              
              <div class="form-group">
                <label for="volWeight">ä½“ç§¯é‡é‡ (kg)</label>
                <input id="volWeight" v-model.number="form.volWeight" type="number" min="0.1" step="0.1" readonly>
                <p class="helper-text">è‡ªåŠ¨è®¡ç®—</p>
              </div>
              
              <div class="form-group">
                <label for="chargeableWeight">è®¡è´¹é‡é‡ (kg)</label>
                <input id="chargeableWeight" v-model.number="form.chargeableWeight" type="number" readonly>
                <p class="helper-text">å–å®é™…ä¸ä½“ç§¯é‡é‡è¾ƒå¤§å€¼</p>
              </div>
              
              <div class="form-group">
                <label for="value">ç”³æŠ¥ä»·å€¼ (USD)</label>
                <input id="value" v-model.number="form.value" type="number" min="0" step="10" required>
                <p class="helper-text">ç”¨äºå…³ç¨è®¡ç®—</p>
              </div>
              
              <div class="form-group">
                <label for="isOversized">è¶…è§„æ ¼åŒ…è£¹ï¼Ÿ</label>
                <select id="isOversized" v-model="form.isOversized">
                  <option value="false">å¦</option>
                  <option value="true">æ˜¯ï¼ˆå•è¾¹>120cmæˆ–é‡é‡>30kgï¼‰</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="isPeakSeason">æ—ºå­£æ—¶æ®µï¼Ÿ</label>
                <select id="isPeakSeason" v-model="form.isPeakSeason">
                  <option value="false">å¦</option>
                  <option value="true">æ˜¯ï¼ˆèŠ‚å‡æ—¥é«˜å³°æœŸï¼‰</option>
                </select>
              </div>
            </div>
          </div>

          <!-- æœåŠ¡é€‰é¡¹ -->
          <div class="form-section-card">
            <h3 class="form-subtitle">ğŸšš æœåŠ¡é€‰é¡¹</h3>
            <div class="form-grid">
              <div class="form-group">
                <label for="serviceType">æœåŠ¡ç±»å‹</label>
                <select id="serviceType" v-model="form.serviceType">
                  <option value="express">ç‰¹å¿«å¿«é€’ (Express)</option>
                  <option value="standard">æ ‡å‡†å¿«é€’ (Standard)</option>
                  <option value="economy">ç»æµå¿«é€’ (Economy)</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="insurance">è´­ä¹°ä¿é™©ï¼Ÿ</label>
                <select id="insurance" v-model="form.insurance">
                  <option value="false">å¦</option>
                  <option value="true">æ˜¯ï¼ˆ+ä¿é™©è´¹ç”¨ï¼‰</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="dutyPrepaid">å…³ç¨é¢„ä»˜ï¼Ÿ</label>
                <select id="dutyPrepaid" v-model="form.dutyPrepaid">
                  <option value="false">å¦ï¼ˆæ”¶ä»¶äººæ”¯ä»˜ï¼‰</option>
                  <option value="true">æ˜¯ï¼ˆ+æ‰‹ç»­è´¹ï¼‰</option>
                </select>
              </div>
              
              <div class="form-group">
                <label>é€‰æ‹©å¿«é€’å…¬å¸</label>
                <div class="carrier-selection">
                  <label class="carrier-checkbox">
                    <input type="checkbox" v-model="form.selectedCarriers" value="UPS"> UPS
                  </label>
                  <label class="carrier-checkbox">
                    <input type="checkbox" v-model="form.selectedCarriers" value="DHL"> DHL
                  </label>
                  <label class="carrier-checkbox">
                    <input type="checkbox" v-model="form.selectedCarriers" value="FedEx"> FedEx
                  </label>
                  <label class="carrier-checkbox">
                    <input type="checkbox" v-model="form.selectedCarriers" value="EMS"> EMS
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- æ“ä½œæŒ‰é’® -->
          <div class="action-buttons">
            <button class="calculate-btn primary-btn" @click="calculateAllShipping" :disabled="loading || form.selectedCarriers.length === 0">
              <span class="btn-icon">ğŸš€</span>
              <span class="btn-text">{{ loading ? 'è®¡ç®—ä¸­...' : 'è®¡ç®—è¿è´¹' }}</span>
            </button>
            
            <button class="secondary-btn" @click="resetForm">
              <span class="btn-icon">ğŸ”„</span>
              <span class="btn-text">é‡ç½®è¡¨å•</span>
            </button>
          </div>
          
          <!-- åŠ è½½çŠ¶æ€ -->
          <div class="loading-overlay" v-if="loading">
            <div class="loading-spinner"></div>
            <p>æ­£åœ¨è®¡ç®—å››å¤§å¿«é€’è´¹ç”¨...</p>
          </div>
        </div>
      </section>

      <!-- ä¸­é—´ï¼šå››å®¶å¿«é€’å¯¹æ¯”ç»“æœ -->
      <section class="results-section" v-if="results.length > 0">
        <div class="section-header">
          <h2 class="section-title">2. å››å¤§å¿«é€’è´¹ç”¨ä¸æ—¶æ•ˆå¯¹æ¯”</h2>
          <p class="section-desc">åŸºäºå½“å‰è¾“å…¥å‚æ•°è®¡ç®—çš„è¯¦ç»†è´¹ç”¨åˆ†è§£</p>
        </div>
        
        <!-- å¿«é€’å…¬å¸å¯¹æ¯”å¡ç‰‡ -->
        <div class="carrier-comparison">
          <div v-for="result in results" :key="result.carrier" class="carrier-card" :class="result.carrier.toLowerCase()">
            <div class="carrier-header">
              <div class="carrier-logo">{{ getCarrierLogo(result.carrier) }}</div>
              <div class="carrier-info">
                <h3 class="carrier-name">{{ result.carrier }}</h3>
                <p class="carrier-service">{{ result.serviceType }}</p>
              </div>
              <div class="carrier-badge" :class="{'cheapest': result.isCheapest, 'fastest': result.isFastest}">
                {{ result.isCheapest ? 'æœ€ç»æµ' : result.isFastest ? 'æœ€å¿«é€Ÿ' : '' }}
              </div>
            </div>
            
            <div class="carrier-summary">
              <div class="summary-item">
                <span class="label">æ€»è´¹ç”¨</span>
                <span class="value total-cost">${{ result.totalCost.toFixed(2) }}</span>
              </div>
              <div class="summary-item">
                <span class="label">é¢„ä¼°æ—¶æ•ˆ</span>
                <span class="value delivery-time">{{ result.deliveryDays }}ä¸ªå·¥ä½œæ—¥</span>
              </div>
              <div class="summary-item">
                <span class="label">è®¡è´¹é‡é‡</span>
                <span class="value">{{ result.chargeableWeight.toFixed(2) }}kg</span>
              </div>
            </div>
            
            <div class="cost-breakdown">
              <h4>è´¹ç”¨æ˜ç»†</h4>
              <div class="breakdown-item">
                <span>åŸºç¡€è¿è´¹</span>
                <span>${{ result.baseFreight.toFixed(2) }}</span>
              </div>
              <div class="breakdown-item" v-if="result.fuelSurcharge > 0">
                <span>ç‡ƒæ²¹é™„åŠ è´¹ {{ result.fuelRate }}%</span>
                <span>${{ result.fuelSurcharge.toFixed(2) }}</span>
              </div>
              <div class="breakdown-item" v-if="result.remoteSurcharge > 0">
                <span>åè¿œåœ°åŒºé™„åŠ è´¹</span>
                <span>${{ result.remoteSurcharge.toFixed(2) }}</span>
              </div>
              <div class="breakdown-item" v-if="result.residentialFee > 0">
                <span>ä½å®…é…é€è´¹</span>
                <span>${{ result.residentialFee.toFixed(2) }}</span>
              </div>
              <div class="breakdown-item" v-if="result.oversizeFee > 0">
                <span>è¶…è§„æ ¼é™„åŠ è´¹</span>
                <span>${{ result.oversizeFee.toFixed(2) }}</span>
              </div>
              <div class="breakdown-item" v-if="result.peakSurcharge > 0">
                <span>æ—ºå­£é™„åŠ è´¹</span>
                <span>${{ result.peakSurcharge.toFixed(2) }}</span>
              </div>
              <div class="breakdown-item" v-if="result.insuranceCost > 0">
                <span>ä¿é™©è´¹ç”¨</span>
                <span>${{ result.insuranceCost.toFixed(2) }}</span>
              </div>
              <div class="breakdown-item" v-if="result.dutyFee > 0">
                <span>å…³ç¨é¢„ä»˜æ‰‹ç»­è´¹</span>
                <span>${{ result.dutyFee.toFixed(2) }}</span>
              </div>
              <div class="breakdown-item" v-if="result.estimatedDuty > 0">
                <span>é¢„ä¼°å…³ç¨ ({{ result.dutyRate }}%)</span>
                <span>${{ result.estimatedDuty.toFixed(2) }}</span>
              </div>
            </div>
            
            <div class="carrier-footer">
              <button class="details-btn" @click="showCarrierDetails(result)">æŸ¥çœ‹è¯¦æƒ…</button>
              <button class="select-btn" @click="selectCarrier(result)">é€‰æ‹©æ­¤å¿«é€’</button>
            </div>
          </div>
        </div>

        <!-- è´¹ç”¨å¯¹æ¯”å›¾è¡¨ -->
        <div class="comparison-chart" v-if="results.length > 1">
          <h3>è´¹ç”¨ä¸æ—¶æ•ˆå¯¹æ¯”åˆ†æ</h3>
          <div class="chart-container">
            <div class="chart-bars">
              <div v-for="result in results" :key="result.carrier" class="chart-bar-container">
                <div class="chart-label">{{ result.carrier }}</div>
                <div class="chart-bar-wrapper">
                  <div 
                    class="chart-bar cost-bar" 
                    :style="{ height: getBarHeight(result.totalCost, 'cost') + '%' }"
                    :title="'æ€»è´¹ç”¨: $' + result.totalCost.toFixed(2)"
                  >
                    <span class="bar-value">${{ result.totalCost.toFixed(0) }}</span>
                  </div>
                  <div 
                    class="chart-bar days-bar" 
                    :style="{ height: getBarHeight(result.deliveryDays, 'days') + '%' }"
                    :title="'æ—¶æ•ˆ: ' + result.deliveryDays + 'å¤©'"
                  >
                    <span class="bar-value">{{ result.deliveryDays }}å¤©</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="chart-legend">
              <div class="legend-item"><span class="legend-color cost-legend"></span> æ€»è´¹ç”¨ (USD)</div>
              <div class="legend-item"><span class="legend-color days-legend"></span> æ—¶æ•ˆ (å·¥ä½œæ—¥)</div>
            </div>
          </div>
        </div>

        <!-- æ¨èå»ºè®® -->
        <div class="recommendation-section">
          <h3>ğŸ’¡ æ™ºèƒ½æ¨è</h3>
          <div class="recommendation-cards">
            <div class="recommendation-card" v-if="cheapestCarrier">
              <div class="rec-icon">ğŸ’°</div>
              <div class="rec-content">
                <h4>æœ€ç»æµé€‰æ‹©</h4>
                <p><strong>{{ cheapestCarrier.carrier }}</strong> - ${{ cheapestCarrier.totalCost.toFixed(2) }}</p>
                <p>é€‚åˆå¯¹æ—¶æ•ˆè¦æ±‚ä¸é«˜çš„å¸¸è§„è´§ç‰©</p>
              </div>
            </div>
            <div class="recommendation-card" v-if="fastestCarrier">
              <div class="rec-icon">âš¡</div>
              <div class="rec-content">
                <h4>æœ€å¿«é€Ÿé€‰æ‹©</h4>
                <p><strong>{{ fastestCarrier.carrier }}</strong> - {{ fastestCarrier.deliveryDays }}ä¸ªå·¥ä½œæ—¥</p>
                <p>é€‚åˆç´§æ€¥æ–‡ä»¶å’Œé«˜ä»·å€¼æ—¶æ•ˆè´§ç‰©</p>
              </div>
            </div>
            <div class="recommendation-card" v-if="bestValueCarrier">
              <div class="rec-icon">â­</div>
              <div class="rec-content">
                <h4>æœ€ä½³æ€§ä»·æ¯”</h4>
                <p><strong>{{ bestValueCarrier.carrier }}</strong> - ${{ bestValueCarrier.totalCost.toFixed(2) }} / {{ bestValueCarrier.deliveryDays }}å¤©</p>
                <p>å¹³è¡¡äº†è´¹ç”¨å’Œæ—¶æ•ˆçš„æœ€ä½³é€‰æ‹©</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- ç»“æœè¯´æ˜ -->
        <div class="results-info">
          <div class="info-icon">â„¹ï¸</div>
          <div class="info-content">
            <h4>è®¡ç®—ç»“æœè¯´æ˜</h4>
            <p>ä»¥ä¸Šè´¹ç”¨ä¸ºä¼°ç®—å€¼ï¼Œå®é™…è´¹ç”¨å¯èƒ½å› ç‡ƒæ²¹è´¹ç‡å˜åŒ–ã€æ±‡ç‡æ³¢åŠ¨ã€å®é™…é‡é‡ä¸ä½“ç§¯é‡é‡çš„æœ€ç»ˆç¡®è®¤ç­‰å› ç´ æœ‰æ‰€ä¸åŒã€‚æ—¶æ•ˆä¸ºå·¥ä½œæ—¥ä¼°ç®—ï¼Œä¸åŒ…å«æ¸…å…³å»¶è¯¯ã€å¤©æ°”å› ç´ æˆ–èŠ‚å‡æ—¥å½±å“ã€‚</p>
          </div>
        </div>
      </section>

      <!-- å³ä¾§ï¼šä¿¡æ¯ä¸è¯´æ˜åŒºåŸŸ -->
      <aside class="info-section">
        <div class="info-content">
          <div class="info-card">
            <h3 class="info-title">ğŸ“‹ è®¡ç®—è¯´æ˜</h3>
            <p class="info-text">æœ¬è®¡ç®—å™¨åŸºäºä»¥ä¸‹æ ‡å‡†è®¡ç®—è´¹ç”¨ï¼š</p>
            <ul class="info-list">
              <li><strong>è®¡è´¹é‡é‡</strong>ï¼šå–å®é™…é‡é‡å’Œä½“ç§¯é‡é‡ä¸­çš„è¾ƒå¤§å€¼</li>
              <li><strong>ä½“ç§¯é‡é‡</strong>ï¼šé•¿Ã—å®½Ã—é«˜(cm) Ã· 5000</li>
              <li><strong>åŸºç¡€è¿è´¹</strong>ï¼šåŸºäºå„å¿«é€’å…¬å¸æœ€æ–°è´¹ç‡è¡¨</li>
              <li><strong>ç‡ƒæ²¹é™„åŠ è´¹</strong>ï¼šåŸºäºæœˆåº¦è°ƒæ•´çš„ç‡ƒæ²¹è´¹ç‡</li>
              <li><strong>å…³ç¨</strong>ï¼šåŸºäºè´§ç‰©ä»·å€¼å’Œç›®çš„å›½ç¨ç‡ä¼°ç®—</li>
            </ul>
          </div>
          
          <div class="info-card">
            <h3 class="info-title">ğŸ¢ å¿«é€’å…¬å¸ç‰¹ç‚¹</h3>
            <ul class="info-list">
              <li><strong>UPS</strong>ï¼šåŒ—ç¾çº¿è·¯ä¼˜åŠ¿æ˜æ˜¾ï¼Œæ¸…å…³èƒ½åŠ›å¼ºï¼Œé™„åŠ è´¹é€æ˜</li>
              <li><strong>DHL</strong>ï¼šæ¬§æ´²çº¿è·¯æ—¶æ•ˆå¿«ï¼Œæ–‡ä»¶ç±»æœåŠ¡ä¸“ä¸šï¼Œç½‘ç»œè¦†ç›–å¹¿</li>
              <li><strong>FedEx</strong>ï¼šç¾å›½å›½å†…ä¼˜åŠ¿æ˜æ˜¾ï¼Œä¸€ä½“åŒ–ä¾›åº”é“¾è§£å†³æ–¹æ¡ˆ</li>
              <li><strong>EMS</strong>ï¼šæ¸…å…³ä¾¿åˆ©ï¼Œæ€§ä»·æ¯”é«˜ï¼Œé€‚åˆç”µå•†å°åŒ…</li>
            </ul>
          </div>
          
          <div class="info-card">
            <h3 class="info-title">â„¹ï¸ é‡è¦æç¤º</h3>
            <ul class="info-list">
              <li>è®¡ç®—ç»“æœä¸ºä¼°ç®—å€¼ï¼Œæœ€ç»ˆè´¹ç”¨ä»¥å¿«é€’å…¬å¸è´¦å•ä¸ºå‡†</li>
              <li>å…³ç¨é‡‘é¢ä¸ºé¢„ä¼°å€¼ï¼Œå®é™…ä»¥æµ·å…³æ ¸å®šä¸ºå‡†</li>
              <li>æ—¶æ•ˆä¸ºå·¥ä½œæ—¥ä¼°ç®—ï¼Œä¸åŒ…å«æ¸…å…³å»¶è¯¯</li>
              <li>åè¿œåœ°åŒºåˆ¤å®šæ ‡å‡†å› å¿«é€’å…¬å¸è€Œå¼‚</li>
              <li>æ—ºå­£é™„åŠ è´¹é€šå¸¸åœ¨10æœˆ-æ¬¡å¹´1æœˆå¾æ”¶</li>
            </ul>
          </div>
          
          <div class="info-card">
            <h3 class="info-title">ğŸ“ˆ å½“å‰è´¹ç‡å‚è€ƒ</h3>
            <div class="rate-info">
              <div class="rate-item">
                <span>ç‡ƒæ²¹é™„åŠ è´¹ç‡</span>
                <span class="rate-value">{{ currentFuelSurcharge }}%</span>
              </div>
              <div class="rate-item">
                <span>æ•°æ®æ›´æ–°æ—¶é—´</span>
                <span class="rate-value">{{ currentMonth }}</span>
              </div>
              <div class="rate-item">
                <span>æ”¯æŒå›½å®¶</span>
                <span class="rate-value">{{ countries.length }}ä¸ª</span>
              </div>
            </div>
          </div>
        </div>
      </aside>
    </main>

    <!-- åº•éƒ¨å¹¿å‘Šæ¨ªå¹… -->
    <div class="ad-banner bottom-banner">
      <div class="ad-placeholder">
        <h3>åˆä½œä¼™ä¼´å¹¿å‘Šä½</h3>
        <p>æ­¤åŒºåŸŸå¯æ”¾ç½®ç›¸å…³ç‰©æµã€ç”µå•†æˆ–æ”¯ä»˜æœåŠ¡çš„å¹¿å‘Š</p>
      </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="main-footer">
      <div class="footer-content">
        <div class="footer-section">
          <h4 class="footer-title">å›½é™…è¿è´¹è®¡ç®—å™¨</h4>
          <p class="footer-text">ä¸“ä¸šæ¯”è¾ƒå››å¤§å›½é™…å¿«é€’çš„è´¹ç”¨ä¸æ—¶æ•ˆï¼ŒåŠ©æ‚¨åšå‡ºæœ€ä½³ç‰©æµå†³ç­–</p>
        </div>
        
        <div class="footer-section">
          <h4 class="footer-title">å¿«é€Ÿé“¾æ¥</h4>
          <ul class="footer-links">
            <li><a href="#" @click.prevent="scrollToTop">å›åˆ°é¡¶éƒ¨</a></li>
            <li><a href="#" @click.prevent="resetForm">é‡æ–°è®¡ç®—</a></li>
            <li><a href="#" @click.prevent="showHelp">ä½¿ç”¨å¸®åŠ©</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h4 class="footer-title">æ•°æ®å£°æ˜</h4>
          <p class="footer-text">è´¹ç‡æ•°æ®æ¯æœˆæ›´æ–°ï¼Œè®¡ç®—ç»“æœä»…ä¾›å‚è€ƒ</p>
          <p class="footer-text">å®é™…è´¹ç”¨ä»¥å„å¿«é€’å…¬å¸å®˜æ–¹æŠ¥ä»·ä¸ºå‡†</p>
        </div>
        
        <div class="footer-section">
          <h4 class="footer-title">æ”¯æŒä¸åé¦ˆ</h4>
          <p class="footer-text">å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»æˆ‘ä»¬</p>
          <p class="footer-email">contact@shipping-calculator.com</p>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p class="copyright">Â© 2023 å›½é™…è¿è´¹è®¡ç®—å™¨ | è®¡ç®—ç»“æœä»…ä¾›å‚è€ƒï¼Œå®é™…è´¹ç”¨ä»¥å„å¿«é€’å…¬å¸å®˜æ–¹æŠ¥ä»·ä¸ºå‡†</p>
        <p class="version">ç‰ˆæœ¬: 2.0.0 | æœ€åæ›´æ–°: 2023å¹´12æœˆ</p>
      </div>
    </footer>
  </div>
</template>

<template>
  <Analytics />
  <!-- your content -->
</template>

<script setup lang="ts">
import { Analytics } from '@vercel/analytics/vue';
</script>

<script setup>
import { ref, computed, reactive, watch } from 'vue'


// å›½å®¶/åœ°åŒºåˆ—è¡¨
const countries = [
  { code: 'US', name: 'ç¾å›½' },
  { code: 'CN', name: 'ä¸­å›½' },
  { code: 'DE', name: 'å¾·å›½' },
  { code: 'GB', name: 'è‹±å›½' },
  { code: 'JP', name: 'æ—¥æœ¬' },
  { code: 'CA', name: 'åŠ æ‹¿å¤§' },
  { code: 'AU', name: 'æ¾³å¤§åˆ©äºš' },
  { code: 'FR', name: 'æ³•å›½' },
  { code: 'IT', name: 'æ„å¤§åˆ©' },
  { code: 'ES', name: 'è¥¿ç­ç‰™' },
  { code: 'KR', name: 'éŸ©å›½' },
  { code: 'SG', name: 'æ–°åŠ å¡' },
  { code: 'HK', name: 'é¦™æ¸¯' },
  { code: 'TW', name: 'å°æ¹¾' },
  { code: 'MY', name: 'é©¬æ¥è¥¿äºš' },
  { code: 'TH', name: 'æ³°å›½' },
  { code: 'VN', name: 'è¶Šå—' }
]

// è¡¨å•æ•°æ®
const form = reactive({
  fromCountry: 'CN',
  fromCity: 'ä¸Šæµ·',
  toCountry: 'US',
  toCity: 'çº½çº¦',
  isRemoteArea: false,
  isResidential: false,
  weight: 2.5,
  length: 30,
  width: 20,
  height: 15,
  volWeight: 0,
  chargeableWeight: 2.5,
  value: 100,
  isOversized: false,
  isPeakSeason: false,
  serviceType: 'express',
  insurance: false,
  dutyPrepaid: false,
  selectedCarriers: ['UPS', 'DHL', 'FedEx', 'EMS']
})

// çŠ¶æ€ç®¡ç†
const loading = ref(false)
const results = ref([])
const currentMonth = ref('2026å¹´1æœˆ')
const currentFuelSurcharge = ref(28.5) // å½“å‰ç‡ƒæ²¹é™„åŠ è´¹ç‡

// ç›‘å¬å°ºå¯¸å˜åŒ–è®¡ç®—ä½“ç§¯é‡é‡
watch([() => form.length, () => form.width, () => form.height], () => {
  if (form.length > 0 && form.width > 0 && form.height > 0) {
    form.volWeight = parseFloat(((form.length * form.width * form.height) / 5000).toFixed(2))
    form.chargeableWeight = Math.max(form.weight, form.volWeight)
  }
})

// ç›‘å¬é‡é‡å˜åŒ–æ›´æ–°è®¡è´¹é‡é‡
watch(() => form.weight, (newWeight) => {
  form.chargeableWeight = Math.max(newWeight, form.volWeight)
})

// è®¡ç®—å±æ€§
const cheapestCarrier = computed(() => {
  if (results.value.length === 0) return null
  return results.value.reduce((min, curr) => 
    curr.totalCost < min.totalCost ? curr : min
  )
})

const fastestCarrier = computed(() => {
  if (results.value.length === 0) return null
  return results.value.reduce((min, curr) => 
    curr.deliveryDays < min.deliveryDays ? curr : min
  )
})

const bestValueCarrier = computed(() => {
  if (results.value.length === 0) return null
  // è®¡ç®—æ€§ä»·æ¯”åˆ†æ•°ï¼šè´¹ç”¨æƒé‡60%ï¼Œæ—¶æ•ˆæƒé‡40%
  const normalizedResults = results.value.map(result => {
    const maxCost = Math.max(...results.value.map(r => r.totalCost))
    const maxDays = Math.max(...results.value.map(r => r.deliveryDays))
    const costScore = (1 - result.totalCost / maxCost) * 0.6
    const timeScore = (1 - result.deliveryDays / maxDays) * 0.4
    return { ...result, valueScore: costScore + timeScore }
  })
  return normalizedResults.reduce((best, curr) => 
    curr.valueScore > best.valueScore ? curr : best
  )
})

// ä¸»è¦è®¡ç®—æ–¹æ³•
const calculateAllShipping = async () => {
  if (form.selectedCarriers.length === 0) {
    alert('è¯·è‡³å°‘é€‰æ‹©ä¸€å®¶å¿«é€’å…¬å¸')
    return
  }
  
  loading.value = true
  results.value = []
  
  // æ¨¡æ‹ŸAPIè°ƒç”¨å»¶è¿Ÿ
  await new Promise(resolve => setTimeout(resolve, 800))
  
  try {
    // è®¡ç®—è®¡è´¹é‡é‡
    const chargeableWeight = Math.max(form.weight, form.volWeight)
    
    // ä¸ºæ¯å®¶é€‰ä¸­çš„å¿«é€’å…¬å¸è®¡ç®—è´¹ç”¨
    const allResults = []
    
    if (form.selectedCarriers.includes('UPS')) {
      allResults.push(calculateUPS(chargeableWeight))
    }
    
    if (form.selectedCarriers.includes('DHL')) {
      allResults.push(calculateDHL(chargeableWeight))
    }
    
    if (form.selectedCarriers.includes('FedEx')) {
      allResults.push(calculateFedEx(chargeableWeight))
    }
    
    if (form.selectedCarriers.includes('EMS')) {
      allResults.push(calculateEMS(chargeableWeight))
    }
    
    // æ ‡è®°æœ€ä¾¿å®œå’Œæœ€å¿«é€Ÿçš„é€‰é¡¹
    if (allResults.length > 0) {
      const minCost = Math.min(...allResults.map(r => r.totalCost))
      const minDays = Math.min(...allResults.map(r => r.deliveryDays))
      
      allResults.forEach(result => {
        result.isCheapest = Math.abs(result.totalCost - minCost) < 0.01
        result.isFastest = result.deliveryDays === minDays
      })
      
      results.value = allResults
    }
    
  } catch (error) {
    console.error('è®¡ç®—é”™è¯¯:', error)
    alert('è®¡ç®—è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·æ£€æŸ¥è¾“å…¥æ•°æ®')
  } finally {
    loading.value = false
  }
}

// UPS è´¹ç”¨è®¡ç®—
const calculateUPS = (chargeableWeight) => {
  const baseRates = {
    express: { firstKg: 45, additionalKg: 15 },
    standard: { firstKg: 32, additionalKg: 12 },
    economy: { firstKg: 28, additionalKg: 10 }
  }
  
  const rate = baseRates[form.serviceType]
  let baseFreight = rate.firstKg
  
  if (chargeableWeight > 1) {
    baseFreight += Math.ceil(chargeableWeight - 1) * rate.additionalKg
  }
  
  // ç‡ƒæ²¹é™„åŠ è´¹
  const fuelSurcharge = baseFreight * (currentFuelSurcharge.value / 100)
  
  // åè¿œåœ°åŒºé™„åŠ è´¹
  const remoteSurcharge = form.isRemoteArea ? baseFreight * 0.15 : 0
  
  // ä½å®…é…é€è´¹
  const residentialFee = form.isResidential ? 15 : 0
  
  // è¶…è§„æ ¼é™„åŠ è´¹
  const oversizeFee = form.isOversized ? 40 : 0
  
  // æ—ºå­£é™„åŠ è´¹
  const peakSurcharge = form.isPeakSeason ? baseFreight * 0.10 : 0
  
  // ä¿é™©è´¹ç”¨
  const insuranceCost = form.insurance ? Math.max(form.value * 0.01, 5) : 0
  
  // å…³ç¨é¢„ä»˜æ‰‹ç»­è´¹
  const dutyFee = form.dutyPrepaid ? 15 : 0
  
  // é¢„ä¼°å…³ç¨
  const dutyRate = getDutyRate(form.toCountry)
  const estimatedDuty = form.value * (dutyRate / 100)
  
  // æ€»è´¹ç”¨
  const totalCost = baseFreight + fuelSurcharge + remoteSurcharge + 
                   residentialFee + oversizeFee + peakSurcharge + 
                   insuranceCost + dutyFee + estimatedDuty
  
  // é¢„ä¼°æ—¶æ•ˆ
  const deliveryDays = estimateDeliveryTime('UPS', form.serviceType, form.toCountry)
  
  return {
    carrier: 'UPS',
    serviceType: getServiceName(form.serviceType),
    chargeableWeight,
    baseFreight,
    fuelSurcharge,
    fuelRate: currentFuelSurcharge.value,
    remoteSurcharge,
    residentialFee,
    oversizeFee,
    peakSurcharge,
    insuranceCost,
    dutyFee,
    estimatedDuty,
    dutyRate,
    totalCost,
    deliveryDays,
    isCheapest: false,
    isFastest: false
  }
}

// DHL è´¹ç”¨è®¡ç®—
const calculateDHL = (chargeableWeight) => {
  const baseRates = {
    express: { firstKg: 48, additionalKg: 16 },
    standard: { firstKg: 35, additionalKg: 13 },
    economy: { firstKg: 30, additionalKg: 11 }
  }
  
  const rate = baseRates[form.serviceType]
  let baseFreight = rate.firstKg
  
  if (chargeableWeight > 1) {
    baseFreight += Math.ceil(chargeableWeight - 1) * rate.additionalKg
  }
  
  const fuelSurcharge = baseFreight * (currentFuelSurcharge.value / 100)
  const remoteSurcharge = form.isRemoteArea ? baseFreight * 0.12 : 0
  const residentialFee = form.isResidential ? 12 : 0
  const oversizeFee = form.isOversized ? 35 : 0
  const peakSurcharge = form.isPeakSeason ? baseFreight * 0.08 : 0
  const insuranceCost = form.insurance ? Math.max(form.value * 0.01, 5) : 0
  const dutyFee = form.dutyPrepaid ? 12 : 0
  
  const dutyRate = getDutyRate(form.toCountry)
  const estimatedDuty = form.value * (dutyRate / 100)
  
  const totalCost = baseFreight + fuelSurcharge + remoteSurcharge + 
                   residentialFee + oversizeFee + peakSurcharge + 
                   insuranceCost + dutyFee + estimatedDuty
  
  const deliveryDays = estimateDeliveryTime('DHL', form.serviceType, form.toCountry)
  
  return {
    carrier: 'DHL',
    serviceType: getServiceName(form.serviceType),
    chargeableWeight,
    baseFreight,
    fuelSurcharge,
    fuelRate: currentFuelSurcharge.value,
    remoteSurcharge,
    residentialFee,
    oversizeFee,
    peakSurcharge,
    insuranceCost,
    dutyFee,
    estimatedDuty,
    dutyRate,
    totalCost,
    deliveryDays,
    isCheapest: false,
    isFastest: false
  }
}

// FedEx è´¹ç”¨è®¡ç®—
const calculateFedEx = (chargeableWeight) => {
  const baseRates = {
    express: { firstKg: 46, additionalKg: 15.5 },
    standard: { firstKg: 33, additionalKg: 12.5 },
    economy: { firstKg: 29, additionalKg: 10.5 }
  }
  
  const rate = baseRates[form.serviceType]
  let baseFreight = rate.firstKg
  
  if (chargeableWeight > 1) {
    baseFreight += Math.ceil(chargeableWeight - 1) * rate.additionalKg
  }
  
  const fuelSurcharge = baseFreight * (currentFuelSurcharge.value / 100)
  const remoteSurcharge = form.isRemoteArea ? baseFreight * 0.14 : 0
  const residentialFee = form.isResidential ? 14 : 0
  const oversizeFee = form.isOversized ? 38 : 0
  const peakSurcharge = form.isPeakSeason ? baseFreight * 0.09 : 0
  const insuranceCost = form.insurance ? Math.max(form.value * 0.01, 5) : 0
  const dutyFee = form.dutyPrepaid ? 14 : 0
  
  const dutyRate = getDutyRate(form.toCountry)
  const estimatedDuty = form.value * (dutyRate / 100)
  
  const totalCost = baseFreight + fuelSurcharge + remoteSurcharge + 
                   residentialFee + oversizeFee + peakSurcharge + 
                   insuranceCost + dutyFee + estimatedDuty
  
  const deliveryDays = estimateDeliveryTime('FedEx', form.serviceType, form.toCountry)
  
  return {
    carrier: 'FedEx',
    serviceType: getServiceName(form.serviceType),
    chargeableWeight,
    baseFreight,
    fuelSurcharge,
    fuelRate: currentFuelSurcharge.value,
    remoteSurcharge,
    residentialFee,
    oversizeFee,
    peakSurcharge,
    insuranceCost,
    dutyFee,
    estimatedDuty,
    dutyRate,
    totalCost,
    deliveryDays,
    isCheapest: false,
    isFastest: false
  }
}

// EMS è´¹ç”¨è®¡ç®—
const calculateEMS = (chargeableWeight) => {
  const baseRates = {
    express: { firstKg: 38, additionalKg: 12 },
    standard: { firstKg: 28, additionalKg: 10 },
    economy: { firstKg: 22, additionalKg: 8 }
  }
  
  const rate = baseRates[form.serviceType]
  let baseFreight = rate.firstKg
  
  if (chargeableWeight > 1) {
    baseFreight += Math.ceil(chargeableWeight - 1) * rate.additionalKg
  }
  
  const fuelSurcharge = baseFreight * 0.05
  const remoteSurcharge = form.isRemoteArea ? baseFreight * 0.10 : 0
  const residentialFee = form.isResidential ? 8 : 0
  const oversizeFee = form.isOversized ? 25 : 0
  const peakSurcharge = form.isPeakSeason ? baseFreight * 0.05 : 0
  const insuranceCost = form.insurance ? Math.max(form.value * 0.008, 4) : 0
  const dutyFee = form.dutyPrepaid ? 10 : 0
  
  const dutyRate = getDutyRate(form.toCountry)
  const estimatedDuty = form.value * (dutyRate / 100)
  
  const totalCost = baseFreight + fuelSurcharge + remoteSurcharge + 
                   residentialFee + oversizeFee + peakSurcharge + 
                   insuranceCost + dutyFee + estimatedDuty
  
  const deliveryDays = estimateDeliveryTime('EMS', form.serviceType, form.toCountry)
  
  return {
    carrier: 'EMS',
    serviceType: getServiceName(form.serviceType),
    chargeableWeight,
    baseFreight,
    fuelSurcharge,
    fuelRate: 5,
    remoteSurcharge,
    residentialFee,
    oversizeFee,
    peakSurcharge,
    insuranceCost,
    dutyFee,
    estimatedDuty,
    dutyRate,
    totalCost,
    deliveryDays,
    isCheapest: false,
    isFastest: false
  }
}

// è¾…åŠ©å‡½æ•°ï¼šè·å–å…³ç¨ç¨ç‡
const getDutyRate = (countryCode) => {
  const dutyRates = {
    'US': 10,
    'CA': 12,
    'GB': 15,
    'DE': 16,
    'FR': 15,
    'IT': 15,
    'ES': 15,
    'AU': 10,
    'JP': 8,
    'KR': 10,
    'CN': 13,
    'HK': 0,
    'SG': 7,
    'MY': 10,
    'TH': 15,
    'VN': 15
  }
  return dutyRates[countryCode] || 10
}

// è¾…åŠ©å‡½æ•°ï¼šé¢„ä¼°è¿è¾“æ—¶é—´
const estimateDeliveryTime = (carrier, serviceType, toCountry) => {
  const baseDays = {
    'UPS': { express: 3, standard: 6, economy: 10 },
    'DHL': { express: 2, standard: 5, economy: 8 },
    'FedEx': { express: 3, standard: 6, economy: 9 },
    'EMS': { express: 7, standard: 10, economy: 14 }
  }
  
  let days = baseDays[carrier][serviceType]
  
  // æ ¹æ®ç›®çš„åœ°è°ƒæ•´
  const regionAdjustments = {
    'US': 0,
    'CA': 1,
    'GB': 1,
    'DE': 1,
    'FR': 1,
    'IT': 1,
    'ES': 1,
    'AU': 2,
    'JP': 0,
    'KR': 0,
    'SG': 0,
    'MY': 1,
    'TH': 1,
    'VN': 1
  }
  
  days += regionAdjustments[toCountry] || 1
  
  return Math.max(days, 2)
}

// è¾…åŠ©å‡½æ•°ï¼šè·å–æœåŠ¡åç§°
const getServiceName = (serviceCode) => {
  const services = {
    'express': 'ç‰¹å¿«å¿«é€’',
    'standard': 'æ ‡å‡†å¿«é€’',
    'economy': 'ç»æµå¿«é€’'
  }
  return services[serviceCode] || 'æ ‡å‡†å¿«é€’'
}

// è¾…åŠ©å‡½æ•°ï¼šè·å–å¿«é€’å…¬å¸logo
const getCarrierLogo = (carrier) => {
  const logos = {
    'UPS': 'ğŸ“¦',
    'DHL': 'ğŸšš',
    'FedEx': 'âœˆï¸',
    'EMS': 'ğŸ“®'
  }
  return logos[carrier] || 'ğŸ“¦'
}

// å›¾è¡¨è¾…åŠ©å‡½æ•°
const getBarHeight = (value, type) => {
  if (results.value.length === 0) return 0
  
  if (type === 'cost') {
    const maxCost = Math.max(...results.value.map(r => r.totalCost))
    return maxCost > 0 ? (value / maxCost) * 80 + 20 : 20
  } else {
    const maxDays = Math.max(...results.value.map(r => r.deliveryDays))
    return maxDays > 0 ? (value / maxDays) * 80 + 20 : 20
  }
}

// UIäº¤äº’å‡½æ•°
const showCarrierDetails = (carrier) => {
  const details = `
å¿«é€’å…¬å¸: ${carrier.carrier}
æœåŠ¡ç±»å‹: ${carrier.serviceType}
è®¡è´¹é‡é‡: ${carrier.chargeableWeight.toFixed(2)}kg
åŸºç¡€è¿è´¹: $${carrier.baseFreight.toFixed(2)}
ç‡ƒæ²¹é™„åŠ è´¹: $${carrier.fuelSurcharge.toFixed(2)} (${carrier.fuelRate}%)
åè¿œé™„åŠ è´¹: $${carrier.remoteSurcharge.toFixed(2)}
ä½å®…é…é€è´¹: $${carrier.residentialFee.toFixed(2)}
è¶…è§„æ ¼è´¹: $${carrier.oversizeFee.toFixed(2)}
æ—ºå­£é™„åŠ è´¹: $${carrier.peakSurcharge.toFixed(2)}
ä¿é™©è´¹ç”¨: $${carrier.insuranceCost.toFixed(2)}
å…³ç¨é¢„ä»˜: $${carrier.dutyFee.toFixed(2)}
é¢„ä¼°å…³ç¨: $${carrier.estimatedDuty.toFixed(2)} (${carrier.dutyRate}%)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡: $${carrier.totalCost.toFixed(2)}
é¢„ä¼°æ—¶æ•ˆ: ${carrier.deliveryDays}ä¸ªå·¥ä½œæ—¥
  `
  alert(details)
}

const selectCarrier = (carrier) => {
  alert(`å·²é€‰æ‹© ${carrier.carrier} ${carrier.serviceType}\næ€»è´¹ç”¨: $${carrier.totalCost.toFixed(2)}\né¢„ä¼°æ—¶æ•ˆ: ${carrier.deliveryDays}ä¸ªå·¥ä½œæ—¥\n\næ‚¨å°†è¢«å¼•å¯¼è‡³å®˜æ–¹ç½‘ç«™å®Œæˆå¯„ä»¶ã€‚`)
}

const resetForm = () => {
  form.fromCountry = 'CN'
  form.fromCity = 'ä¸Šæµ·'
  form.toCountry = 'US'
  form.toCity = 'çº½çº¦'
  form.isRemoteArea = false
  form.isResidential = false
  form.weight = 2.5
  form.length = 30
  form.width = 20
  form.height = 15
  form.volWeight = parseFloat(((30*20*15)/5000).toFixed(2))
  form.chargeableWeight = 2.5
  form.value = 100
  form.isOversized = false
  form.isPeakSeason = false
  form.serviceType = 'express'
  form.insurance = false
  form.dutyPrepaid = false
  form.selectedCarriers = ['UPS', 'DHL', 'FedEx', 'EMS']
  results.value = []
}

const scrollToTop = () => {
  window.scrollTo({ top: 0, behavior: 'smooth' })
}

const showHelp = () => {
  alert('ä½¿ç”¨å¸®åŠ©ï¼š\n1. å¡«å†™å‘è´§åœ°å’Œç›®çš„åœ°ä¿¡æ¯\n2. è¾“å…¥åŒ…è£¹è¯¦ç»†ä¿¡æ¯å’Œä»·å€¼\n3. é€‰æ‹©éœ€è¦çš„æœåŠ¡é€‰é¡¹\n4. å‹¾é€‰è¦æ¯”è¾ƒçš„å¿«é€’å…¬å¸\n5. ç‚¹å‡»"è®¡ç®—è¿è´¹"è·å–æŠ¥ä»·')
}
</script>

<style scoped>
/* åŸºç¡€æ ·å¼é‡ç½® */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
  line-height: 1.6;
  color: #1a1a1a;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  min-height: 100vh;
}

/* ä¸»å®¹å™¨ - å®½åº¦æ‰©å±•è‡³2å€ */
.container {
  max-width: 2400px;
  margin: 0 auto;
  padding: 30px 40px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* å¹¿å‘Šæ¨ªå¹…æ ·å¼ */
.ad-banner {
  margin: 25px 0;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
}

.top-banner {
  margin-top: 0;
  margin-bottom: 40px;
}

.bottom-banner {
  margin-top: 50px;
  margin-bottom: 0;
}

.ad-placeholder {
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  color: white;
  padding: 40px;
  text-align: center;
  border-radius: 16px;
}

.ad-placeholder h3 {
  font-size: 28px;
  margin-bottom: 15px;
  font-weight: 700;
}

.ad-placeholder p {
  font-size: 18px;
  opacity: 0.9;
}

/* ä¸»æ ‡é¢˜åŒºåŸŸ */
.main-header {
  background: white;
  border-radius: 20px;
  padding: 50px;
  margin-bottom: 50px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.06);
  border: 1px solid #e2e8f0;
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 40px;
}

.logo-area {
  flex: 1;
  min-width: 600px;
}

.main-title {
  font-size: 44px;
  color: #1e293b;
  margin-bottom: 20px;
  font-weight: 800;
  line-height: 1.2;
}

.main-subtitle {
  font-size: 22px;
  color: #64748b;
  max-width: 900px;
  line-height: 1.5;
}

.header-info {
  display: flex;
  gap: 30px;
  flex-wrap: wrap;
}

.info-card {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 25px;
  background: #f8fafc;
  border-radius: 16px;
  min-width: 220px;
  border: 1px solid #e2e8f0;
}

.info-icon {
  font-size: 36px;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.info-text h4 {
  font-size: 20px;
  color: #1e293b;
  margin-bottom: 5px;
  font-weight: 700;
}

.info-text p {
  font-size: 16px;
  color: #64748b;
}

/* ä¸»è¦å†…å®¹åŒºåŸŸ - ä¸‰åˆ—å¸ƒå±€ */
.main-content {
  display: grid;
  grid-template-columns: 1fr 1.2fr 0.8fr;
  gap: 40px;
  margin-bottom: 60px;
  flex: 1;
}

/* å„åŒºåŸŸå…¬å…±æ ·å¼ */
.input-section,
.results-section,
.info-section {
  background: white;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.06);
  border: 1px solid #e2e8f0;
}

.section-header {
  margin-bottom: 40px;
}

.section-title {
  font-size: 32px;
  color: #1e293b;
  margin-bottom: 15px;
  font-weight: 700;
}

.section-desc {
  font-size: 18px;
  color: #64748b;
}

/* è¡¨å•åŒºåŸŸæ ·å¼ */
.form-container {
  display: flex;
  flex-direction: column;
  gap: 35px;
  position: relative;
}

.form-section-card {
  background: #f8fafc;
  border-radius: 16px;
  padding: 35px;
  border: 1px solid #e2e8f0;
}

.form-subtitle {
  font-size: 24px;
  color: #1e293b;
  margin-bottom: 25px;
  font-weight: 600;
  padding-bottom: 15px;
  border-bottom: 2px solid #e2e8f0;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 25px;
}

.form-grid.triple {
  grid-template-columns: repeat(3, 1fr);
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-size: 18px;
  color: #475569;
  margin-bottom: 12px;
  font-weight: 600;
}

.form-group input,
.form-group select {
  padding: 18px 20px;
  font-size: 18px;
  border: 2px solid #cbd5e1;
  border-radius: 12px;
  background: white;
  transition: all 0.3s ease;
  color: #1e293b;
}

.form-group input:focus,
.form-group select:focus {
  outline: none;
  border-color: #4f46e5;
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.form-group input::placeholder {
  color: #94a3b8;
}

.form-group input[readonly] {
  background-color: #f1f5f9;
  cursor: not-allowed;
}

.helper-text {
  font-size: 14px;
  color: #64748b;
  margin-top: 8px;
}

/* å¿«é€’å…¬å¸é€‰æ‹©å™¨ */
.carrier-selection {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-top: 10px;
}

.carrier-checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 15px;
  background: #f8fafc;
  border-radius: 10px;
  border: 2px solid #e2e8f0;
  cursor: pointer;
  transition: all 0.2s ease;
}

.carrier-checkbox:hover {
  background: #f1f5f9;
}

.carrier-checkbox input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

/* æŒ‰é’®æ ·å¼ */
.action-buttons {
  display: flex;
  gap: 25px;
  margin-top: 20px;
}

.calculate-btn,
.primary-btn,
.secondary-btn {
  padding: 22px 40px;
  font-size: 20px;
  border: none;
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  font-weight: 600;
}

.primary-btn {
  flex: 2;
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  color: white;
}

.primary-btn:hover:not(:disabled) {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(79, 70, 229, 0.3);
}

.primary-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
}

.secondary-btn {
  flex: 1;
  background: #f1f5f9;
  color: #475569;
  border: 2px solid #cbd5e1;
}

.secondary-btn:hover {
  background: #e2e8f0;
}

.btn-icon {
  font-size: 24px;
}

.btn-text {
  font-size: 20px;
}

/* åŠ è½½çŠ¶æ€ */
.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.9);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 16px;
  z-index: 10;
}

.loading-spinner {
  border: 4px solid #f3f3f3;
  border-top: 4px solid #4f46e5;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* å¿«é€’å…¬å¸å¡ç‰‡æ ·å¼ */
.carrier-comparison {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 25px;
  margin: 30px 0;
}

.carrier-card {
  background: white;
  border-radius: 16px;
  padding: 25px;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
  border: 2px solid #e2e8f0;
  transition: all 0.3s ease;
}

.carrier-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
}

.carrier-card.ups {
  border-top: 4px solid #351c15;
}

.carrier-card.dhl {
  border-top: 4px solid #ffcc00;
}

.carrier-card.fedex {
  border-top: 4px solid #4d148c;
}

.carrier-card.ems {
  border-top: 4px solid #da291c;
}

.carrier-header {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 2px solid #f1f5f9;
}

.carrier-logo {
  font-size: 36px;
  margin-right: 15px;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8fafc;
  border-radius: 12px;
}

.carrier-info {
  flex: 1;
}

.carrier-name {
  font-size: 22px;
  font-weight: 700;
  color: #1e293b;
  margin-bottom: 5px;
}

.carrier-service {
  font-size: 15px;
  color: #64748b;
}

.carrier-badge {
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
}

.carrier-badge.cheapest {
  background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
  color: white;
}

.carrier-badge.fastest {
  background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
  color: white;
}

.carrier-summary {
  background: #f8fafc;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
}

.summary-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.summary-item:last-child {
  margin-bottom: 0;
}

.summary-item .label {
  font-size: 15px;
  color: #64748b;
}

.summary-item .value {
  font-size: 17px;
  font-weight: 600;
  color: #1e293b;
}

.summary-item .total-cost {
  font-size: 24px;
  color: #10b981;
  font-weight: 700;
}

.summary-item .delivery-time {
  color: #3b82f6;
}

.cost-breakdown {
  margin-bottom: 20px;
}

.cost-breakdown h4 {
  font-size: 16px;
  color: #475569;
  margin-bottom: 15px;
  font-weight: 600;
}

.breakdown-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid #f1f5f9;
  font-size: 14px;
}

.breakdown-item:last-child {
  border-bottom: none;
}

.breakdown-item span:first-child {
  color: #64748b;
}

.breakdown-item span:last-child {
  color: #1e293b;
  font-weight: 500;
}

.carrier-footer {
  display: flex;
  gap: 10px;
}

.carrier-footer button {
  flex: 1;
  padding: 12px;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.carrier-footer .details-btn {
  background: #f1f5f9;
  color: #475569;
}

.carrier-footer .details-btn:hover {
  background: #e2e8f0;
}

.carrier-footer .select-btn {
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  color: white;
}

.carrier-footer .select-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
}

/* å›¾è¡¨æ ·å¼ */
.comparison-chart {
  background: white;
  border-radius: 16px;
  padding: 30px;
  margin: 40px 0;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.06);
}

.comparison-chart h3 {
  font-size: 22px;
  color: #1e293b;
  margin-bottom: 25px;
  font-weight: 700;
}

.chart-container {
  margin-top: 20px;
}

.chart-bars {
  display: flex;
  justify-content: space-around;
  align-items: flex-end;
  height: 300px;
  padding: 0 40px;
  border-bottom: 2px solid #e2e8f0;
  position: relative;
}

.chart-bar-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 120px;
}

.chart-label {
  font-size: 16px;
  font-weight: 600;
  color: #475569;
  margin-bottom: 15px;
}

.chart-bar-wrapper {
  display: flex;
  gap: 10px;
  width: 100%;
  height: 200px;
  align-items: flex-end;
}

.chart-bar {
  width: 40px;
  border-radius: 8px 8px 0 0;
  position: relative;
  transition: height 0.5s ease;
}

.cost-bar {
  background: linear-gradient(to top, #10b981, #34d399);
}

.days-bar {
  background: linear-gradient(to top, #3b82f6, #60a5fa);
}

.bar-value {
  position: absolute;
  top: -25px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 14px;
  font-weight: 600;
  color: #1e293b;
  white-space: nowrap;
}

.chart-legend {
  display: flex;
  justify-content: center;
  gap: 30px;
  margin-top: 25px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 15px;
  color: #475569;
}

.legend-color {
  width: 20px;
  height: 20px;
  border-radius: 4px;
}

.cost-legend {
  background: linear-gradient(135deg, #10b981, #34d399);
}

.days-legend {
  background: linear-gradient(135deg, #3b82f6, #60a5fa);
}

/* æ¨èå¡ç‰‡æ ·å¼ */
.recommendation-section {
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
  border-radius: 16px;
  padding: 30px;
  margin: 30px 0;
  border: 2px solid #bae6fd;
}

.recommendation-section h3 {
  font-size: 24px;
  color: #0369a1;
  margin-bottom: 25px;
  font-weight: 700;
}

.recommendation-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

.recommendation-card {
  background: white;
  border-radius: 12px;
  padding: 25px;
  display: flex;
  align-items: center;
  gap: 20px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.rec-icon {
  font-size: 40px;
  width: 70px;
  height: 70px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8fafc;
  border-radius: 12px;
}

.rec-content h4 {
  font-size: 18px;
  color: #1e293b;
  margin-bottom: 8px;
  font-weight: 700;
}

.rec-content p {
  font-size: 15px;
  color: #64748b;
  margin-bottom: 5px;
}

/* ç»“æœè¯´æ˜ */
.results-info {
  display: flex;
  align-items: flex-start;
  gap: 20px;
  background: #f8fafc;
  border-radius: 12px;
  padding: 25px;
  margin-top: 30px;
  border-left: 4px solid #4f46e5;
}

.results-info .info-icon {
  font-size: 28px;
  width: 50px;
  height: 50px;
  background: #e0e7ff;
  color: #4f46e5;
}

.results-info .info-content h4 {
  font-size: 18px;
  color: #1e293b;
  margin-bottom: 10px;
  font-weight: 600;
}

.results-info .info-content p {
  font-size: 16px;
  color: #64748b;
  line-height: 1.5;
}

/* å³ä¾§ä¿¡æ¯åŒºåŸŸæ ·å¼ */
.info-section {
  height: fit-content;
  position: sticky;
  top: 40px;
}

.info-content {
  display: flex;
  flex-direction: column;
  gap: 35px;
}

.info-section .info-card {
  background: #f8fafc;
  border-radius: 16px;
  padding: 30px;
  border: 1px solid #e2e8f0;
  display: block;
}

.info-section .info-title {
  font-size: 24px;
  color: #1e293b;
  margin-bottom: 20px;
  font-weight: 700;
  padding-bottom: 15px;
  border-bottom: 2px solid #e2e8f0;
}

.info-section .info-list {
  list-style-type: none;
}

.info-section .info-list li {
  font-size: 17px;
  color: #475569;
  margin-bottom: 15px;
  padding-left: 10px;
  position: relative;
  line-height: 1.5;
}

.info-section .info-list li:before {
  content: "â€º";
  color: #4f46e5;
  font-size: 20px;
  position: absolute;
  left: -15px;
}

.info-section .info-text {
  font-size: 17px;
  color: #475569;
  margin-bottom: 15px;
  line-height: 1.5;
}

.rate-info {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.rate-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid #e2e8f0;
}

.rate-item:last-child {
  border-bottom: none;
}

.rate-item span:first-child {
  color: #64748b;
  font-size: 16px;
}

.rate-item .rate-value {
  color: #1e293b;
  font-weight: 600;
  font-size: 18px;
}

/* é¡µè„šæ ·å¼ */
.main-footer {
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  color: white;
  border-radius: 20px;
  padding: 60px 50px 30px;
  margin-top: 60px;
}

.footer-content {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 50px;
  margin-bottom: 50px;
}

.footer-section {
  display: flex;
  flex-direction: column;
}

.footer-title {
  font-size: 22px;
  color: #f1f5f9;
  margin-bottom: 25px;
  font-weight: 700;
  position: relative;
  padding-bottom: 15px;
}

.footer-title:after {
  content: '';
  position: absolute;
  left: 0;
  bottom: 0;
  width: 50px;
  height: 3px;
  background: #4f46e5;
  border-radius: 2px;
}

.footer-text {
  font-size: 17px;
  color: #cbd5e1;
  line-height: 1.6;
  margin-bottom: 20px;
}

.footer-links {
  list-style-type: none;
}

.footer-links li {
  margin-bottom: 15px;
}

.footer-links a {
  font-size: 17px;
  color: #cbd5e1;
  text-decoration: none;
  transition: color 0.2s ease;
  cursor: pointer;
}

.footer-links a:hover {
  color: #4f46e5;
}

.footer-email {
  font-size: 16px;
  color: #94a3b8;
  margin-top: 10px;
}

.footer-bottom {
  border-top: 1px solid #334155;
  padding-top: 30px;
  text-align: center;
}

.copyright {
  font-size: 16px;
  color: #94a3b8;
  line-height: 1.5;
  margin-bottom: 10px;
}

.version {
  font-size: 14px;
  color: #64748b;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 2000px) {
  .container {
    max-width: 1800px;
    padding: 30px;
  }
  
  .main-content {
    grid-template-columns: 1fr 1fr;
  }
  
  .info-section {
    grid-column: span 2;
    margin-top: 40px;
    position: static;
  }
}

@media (max-width: 1400px) {
  .carrier-comparison {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .footer-content {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 1200px) {
  .container {
    max-width: 100%;
    padding: 20px;
  }
  
  .main-content {
    grid-template-columns: 1fr;
    gap: 30px;
  }
  
  .info-section {
    grid-column: span 1;
    margin-top: 0;
  }
  
  .footer-content {
    grid-template-columns: 1fr;
    gap: 40px;
  }
  
  .summary-container {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 1100px) {
  .carrier-comparison {
    grid-template-columns: 1fr;
  }
  
  .chart-bars {
    padding: 0 20px;
  }
  
  .chart-bar-container {
    width: 80px;
  }
}

@media (max-width: 768px) {
  .main-header {
    padding: 30px;
  }
  
  .header-content {
    flex-direction: column;
    text-align: center;
  }
  
  .logo-area {
    min-width: 100%;
  }
  
  .header-info {
    justify-content: center;
  }
  
  .info-card {
    min-width: 200px;
  }
  
  .form-grid {
    grid-template-columns: 1fr;
  }
  
  .form-grid.triple {
    grid-template-columns: 1fr;
  }
  
  .carrier-comparison {
    grid-template-columns: 1fr;
  }
  
  .chart-bars {
    flex-direction: column;
    height: auto;
    align-items: center;
    gap: 30px;
  }
  
  .chart-bar-wrapper {
    flex-direction: row;
    height: 150px;
    width: 100%;
    justify-content: center;
  }
  
  .recommendation-cards {
    grid-template-columns: 1fr;
  }
  
  .carrier-footer {
    flex-direction: column;
  }
  
  .action-buttons {
    flex-direction: column;
  }
  
  .footer-content {
    grid-template-columns: 1fr;
    gap: 30px;
  }
}

/* åŠ¨ç”»æ•ˆæœ */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.results-section {
  animation: fadeIn 0.5s ease-out;
}

/* æ‰“å°æ ·å¼ */
@media print {
  .ad-banner,
  .action-buttons,
  .details-btn,
  .select-btn,
  .footer-links a {
    display: none !important;
  }
  
  .container {
    max-width: 100%;
    padding: 0;
  }
  
  .main-content {
    display: block;
  }
  
  .input-section,
  .results-section,
  .info-section {
    box-shadow: none;
    border: 1px solid #ddd;
    margin-bottom: 20px;
    page-break-inside: avoid;
  }
}
</style>